{"version":3,"file":"publish.js","sources":["pages/publish/publish.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVibGlzaC9wdWJsaXNoLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"my-published-page\">\n    <!-- 顶部导航栏 -->\n    <view class=\"navbar\">\n      <text class=\"nav-title\">我发布的商品</text>\n      <button class=\"add-goods-btn\" @click=\"goToPublish\">\n        <uni-icons type=\"plus\" size=\"24\" color=\"#fff\"></uni-icons>\n        <text class=\"add-text\">发布商品</text>\n      </button>\n    </view>\n    \n    <!-- 搜索和筛选区域 -->\n    <view class=\"filter-container\">\n      <view class=\"search-box\">\n        <uni-icons type=\"search\" size=\"24\" color=\"#999\" class=\"search-icon\"></uni-icons>\n        <input \n          type=\"text\" \n          placeholder=\"搜索我的商品...\" \n          v-model=\"searchKeyword\"\n          @input=\"handleSearch\"\n          class=\"search-input\"\n        />\n      </view>\n      \n      <view class=\"picker-container\">\n        <view class=\"picker-item\">\n          <text class=\"picker-label\">分类:</text>\n          <picker \n            mode=\"selector\"\n            :range=\"categoryRange\"\n            :value=\"categoryIndex\"\n            @change=\"handleCategoryChange\"\n            class=\"custom-picker\"\n          >\n            <view class=\"picker-display\">\n              {{ categoryRange[categoryIndex] }}\n              <uni-icons type=\"down\" size=\"18\" color=\"#999\" class=\"picker-icon\"></uni-icons>\n            </view>\n          </picker>\n        </view>\n        \n        <view class=\"picker-item\">\n          <text class=\"picker-label\">状态:</text>\n          <picker \n            mode=\"selector\"\n            :range=\"statusRange\"\n            :value=\"statusIndex\"\n            @change=\"handleStatusChange\"\n            class=\"custom-picker\"\n          >\n            <view class=\"picker-display\">\n              {{ statusRange[statusIndex] }}\n              <uni-icons type=\"down\" size=\"18\" color=\"#999\" class=\"picker-icon\"></uni-icons>\n            </view>\n          </picker>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 商品列表说明 -->\n    <view class=\"list-note\">\n      <uni-icons type=\"info\" size=\"24\" color=\"#7c89ff\" class=\"note-icon\"></uni-icons>\n      <text class=\"note-text\">注：已完成的商品无法编辑和删除，相关按钮将自动隐藏</text>\n    </view>\n    \n    <!-- 商品列表 -->\n    <view class=\"goods-list\">\n      <view v-if=\"isLoading\" class=\"loading-state\">\n        <uni-icons type=\"loading\" size=\"40\" color=\"#7c89ff\" spin></uni-icons>\n        <text class=\"loading-text\">加载中...</text>\n      </view>\n      \n      <view \n        class=\"goods-row\" \n        v-else-if=\"filteredGoods.length > 0\"\n        v-for=\"goods in filteredGoods\" \n        :key=\"goods.id\"\n      >\n        <view class=\"goods-info\" @click=\"navigateToDetail(goods.id)\">\n          <image \n            :src=\"goods.imgUrl || 'https://api.shaolezhuan.cn/lzphoto/productDefault.jpg'\" \n            mode=\"widthFix\" \n            class=\"goods-img\"\n          ></image>\n          \n          <view class=\"goods-text-content\">\n            <view class=\"goods-title\">{{ goods.title }}</view>\n            \n            <view class=\"goods-meta\">\n              <text class=\"goods-price\">¥{{ goods.price.toFixed(2) }}</text>\n              <text class=\"publish-time\">{{ formatTime(goods.publishTime) }}</text>\n            </view>\n            \n            <view class=\"goods-status\">\n              <view class=\"status-badge\" :class=\"getStatusClass(goods.status)\">\n                {{ convertStatusToChinese(goods.status) }}\n              </view>\n              <view class=\"tags-container\">\n                <uni-tag \n                  v-if=\"goods.isTop === 1\"\n                  size=\"mini\"\n                  text=\"已置顶\"\n                  type=\"primary\"\n                ></uni-tag>\n                <uni-tag \n                  v-if=\"goods.isOnHome\"\n                  size=\"mini\"\n                  text=\"首页展示\"\n                  type=\"success\"\n                ></uni-tag>\n              </view>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"goods-actions\" v-if=\"convertStatusToChinese(goods.status) !== '已完成'\">\n          <button \n            class=\"action-btn edit-btn\" \n            @click.stop=\"handleOpenEditPopup(goods)\"\n          >\n            <uni-icons type=\"compose\" size=\"20\" color=\"#409EFF\"></uni-icons>\n          </button>\n          <button \n            class=\"action-btn delete-btn\" \n            @click.stop=\"deleteGoods(goods.id)\"\n          >\n            <uni-icons type=\"trash\" size=\"20\" color=\"#F56C6C\"></uni-icons>\n          </button>\n        </view>\n      </view>\n      \n      <view class=\"empty-state\" v-else>\n        <uni-icons type=\"empty\" size=\"60\" color=\"#ccc\"></uni-icons>\n        <text class=\"empty-text\">暂无符合条件的商品</text>\n        <button class=\"publish-btn\" @click=\"goToPublish\">发布新商品</button>\n      </view>\n    </view>\n  \n    <uni-popup \n      ref=\"editPopup\"\n      type=\"bottom\"\n      :mask=\"true\"\n      :mask-click=\"false\"\n      class=\"edit-popup\"\n    >\n      <view class=\"edit-dialog\">\n        <!-- 降价输入区域 -->\n        <view class=\"price-edit-container\">\n          <text class=\"price-label\">降价为:</text>\n          <input \n            type=\"number\" \n            v-model=\"newPrice\"\n            step=\"0.01\"\n            min=\"0.01\"\n            class=\"price-input\"\n            placeholder=\"输入定价\"\n          />\n        </view>\n        \n        <!-- 操作按钮区域 -->\n        <view class=\"action-buttons\">\n          <button \n            class=\"operation-btn top-btn\" \n            @click=\"setGoodsTop\"\n\t\t\t:disabled=\"currentGoods?.isTop\"\n\t\t\tv-if=\"currentGoods?.status !== '已完成' && !currentGoods?.isTop\" \n          >\n            置顶\n          </button>\n          <button \n            class=\"operation-btn home-btn\" \n            @click=\"setGoodsToHome\"\n\t\t\t:disabled=\"currentGoods?.isOnHome\"\n\t\t\tv-if=\"currentGoods?.status !== '已完成' && !currentGoods?.isOnHome\"\n          >\n            上首页\n          </button>\n          <!-- 确认售出按钮 -->\n          <button \n            class=\"operation-btn sell-btn\" \n            @click=\"confirmGoodsSold\"\n\t\t\tv-if=\"currentGoods?.status !== '已完成'\"\n          >\n            确认完成交易\n          </button>\n        </view>\n        \n        <!-- 确认降价按钮 -->\n        <button class=\"confirm-price-btn\" @click=\"confirmPriceReduction\">\n          确认降价\n        </button>\n        \n        <!-- 取消按钮 -->\n        <button class=\"dialog-cancel\" @click=\"CancelEdit\">\n          取消\n        </button>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed, nextTick } from 'vue';\n// 导入你的接口封装（根据实际路径调整）\nimport productApi from '@/api/product.js';\n\n// 基础状态\nconst searchKeyword = ref('');\nconst isLoading = ref(false);\nconst currentGoods = ref(null);\nconst newPrice = ref('');\nconst editPopup = ref(null);\n\n// Picker筛选配置\nconst categoryRange = ref(['全部分类']);\nconst statusRange = ref(['全部状态', '待审核', '已上架','已拒绝','已完成']);\nconst categoryIndex = ref(0);\nconst statusIndex = ref(0);\n\n// 商品数据\nconst publishedGoods = ref([]);\n\n// 页面加载时获取商品列表\nonMounted(() => {\n  fetchMyGoods();\n  // 监听页面显示事件，重新获取数据\n  uni.$on('pageShow', fetchMyGoods);\n});\n\n//商品状态\nconst convertStatusToChinese = (englishStatus) => {\n  // 状态映射关系\n  const statusMap = {\n    'pending_review': '待审核',\n    'active': '已上架',\n    'rejected': '已拒绝',\n    'sold': '已完成'\n  };\n  // 如果有对应的中文状态则返回，否则返回原英文状态\n  return statusMap[englishStatus] || englishStatus;\n};\n\n// 获取我的商品列表（调用你的接口封装）\nconst fetchMyGoods = async () => {\n  try {\n    isLoading.value = true;\n    // 构造筛选参数\n    const myData = {\n\t  current:1,\n\t  size:100,\n\t  timestamp: Date.now()\n      // category: categoryRange.value[categoryIndex.value] === '全部种类' ? '' : categoryRange.value[categoryIndex.value],\n      // status: statusRange.value[statusIndex.value] === '全部状态' ? '' : statusRange.value[statusIndex.value]\n    };\n    // 调用接口\n    const res = await productApi.getMyGoods(myData);\n    \n    const rawGoodsList = res.data.records || [];\n\t\n\tconsole.log('后端返回的我发布的商品数据是：',rawGoodsList)\n\t\n\t// 筛选并映射为目标格式\n\tpublishedGoods.value = rawGoodsList\n\t  .filter(raw => raw.status !== 'delisted') // 排除状态为 delisted 的商品\n\t  .map(raw => ({\n\t    id: raw.id,\n\t    title: raw.title,\n\t    desc: raw.description || '',\n\t    imgUrl: raw.mainImageUrl || '',\n\t    price: raw.price || 0,\n\t    category: raw.categoryName || '',\n\t    location: '',\n\t    publishTime: raw.createdAt ? new Date(raw.createdAt).getTime() : Date.now(),\n\t    status: convertStatusToChinese(raw.status) || '待审核',\n\t    isTop: raw.urgentPush || false,\n\t    isOnHome: raw.isHomepageFeatured || false\n\t  }));\n    \n\tconsole.log('清洗完的数据：',publishedGoods.value)\n\t\n    // 动态生成种类Picker选项\n    const categories = [...new Set(publishedGoods.value.map(item => item.category))];\n    categoryRange.value = ['全部分类', ...categories];\n  } catch (error) {\n    console.error('获取商品列表失败:', error);\n    uni.showToast({\n      title: '加载商品失败',\n      icon: 'none',\n      duration: 2000\n    });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 筛选逻辑\nconst filteredGoods = computed(() => {\n  return publishedGoods.value.filter(goods => {\n    const matchesSearch = searchKeyword.value === ''\n      ? true\n      : goods.title.toLowerCase().includes(searchKeyword.value.toLowerCase())\n        || (goods.desc && goods.desc.toLowerCase().includes(searchKeyword.value.toLowerCase()));\n\n    const selectedCategory = categoryRange.value[categoryIndex.value];\n    const matchesCategory = selectedCategory === '全部分类'\n      ? true\n      : goods.category === selectedCategory;\n\n    const selectedStatus = statusRange.value[statusIndex.value];\n    // 统一按中文状态比较：无论 goods.status 是英文还是中文，都转成中文再比较\n    const goodsStatusCN = convertStatusToChinese(goods.status);\n    const matchesStatus = selectedStatus === '全部状态'\n      ? true\n      : goodsStatusCN === selectedStatus;\n\n    return matchesSearch && matchesCategory && matchesStatus;\n  });\n});\n\n// Picker事件处理（筛选条件变化时重新请求）\nconst handleCategoryChange = (e) => {\n  categoryIndex.value = e.detail.value;\n  fetchMyGoods();\n};\n\nconst handleStatusChange = (e) => {\n  statusIndex.value = e.detail.value;\n  fetchMyGoods();\n};\n\nconst handleSearch = () => {\n  // 搜索由computed自动触发本地筛选\n};\n\nconst getStatusClass = (status) => {\n  // 状态文本与样式类的映射（根据实际中文状态调整）\n  const classMap = {\n    '待审核': 'status-pending',    // 待审核状态样式\n    '已上架': 'status-onsale',     // 已上架/出售中样式\n    '已拒绝': 'status-rejected',   // 已拒绝状态样式\n    '已完成': 'status-completed'   // 已完成状态样式\n  };\n  return classMap[status] || 'status-default'; // 默认样式（可选）\n};\n\n// 时间格式化\nconst formatTime = (timestamp) => {\n  const now = Date.now();\n  const diff = now - timestamp;\n  \n  if (diff < 3600 * 1000) {\n    return `${Math.floor(diff / (60 * 1000))}分钟前`;\n  } else if (diff < 24 * 3600 * 1000) {\n    return `${Math.floor(diff / (3600 * 1000))}小时前`;\n  } else {\n    return `${Math.floor(diff / (24 * 3600 * 1000))}天前`;\n  }\n};\n\n// 导航到商品详情\nconst navigateToDetail = (id) => {\n  uni.navigateTo({\n    url: `/pages/goodsDetail/goodsDetail?id=${id}`\n  });\n};\n\n// 打开编辑弹窗\nconst handleOpenEditPopup = async (goods) => {\n  try {\n    currentGoods.value = { ...goods };\n    newPrice.value = goods.price.toString();\n    await nextTick();\n\tawait fetchMyGoods();\n    editPopup.value?.open('bottom');\n  } catch (error) {\n    console.error('打开编辑弹窗失败:', error);\n    uni.showToast({ title: '打开弹窗失败', icon: 'none' });\n  }\n};\n\n// 显示已完成提示\nconst showSoldTip = () => {\n  uni.showModal({\n    title: '提示',\n    content: '已完成的商品无法编辑',\n    showCancel: false,\n    confirmText: '知道了'\n  });\n};\n\nconst CancelEdit = () => {\n  editPopup.value?.close();\n};\n\n// 确认降价\nconst confirmPriceReduction = async () => {\n  if (!currentGoods.value) return;\n  \n  // 校验价格\n  if (!newPrice.value || isNaN(newPrice.value) || parseFloat(newPrice.value) >= currentGoods.value.price) {\n    uni.showToast({\n      title: '请输入有效的新价格',\n      icon: 'none',\n      duration: 2000\n    });\n    return;\n  }\n\n  try {\n    isLoading.value = true;\n    // 调用降价接口\n    const res = await productApi.updateGoodsPrice(\n      currentGoods.value.id, // 路径中的 productId\n      { price: parseFloat(newPrice.value) } // 请求体中的新价格\n    );\n\t\n\tconsole.log('降价状态：',newPrice)\n\t\n\tif(res.code === 200){\n\t\tuni.showToast({ title: '降价成功', icon: 'success' });\n\t\t// 更新本地数据\n\t\tconst index = publishedGoods.value.findIndex(item => item.id === currentGoods.value.id);\n\t\tif (index !== -1) {\n\t\t  publishedGoods.value[index].price = parseFloat(newPrice.value);\n\t\t}\n\t}else{\n\t\tuni.showToast({\n\t\t  title: `调整失败：${res.msg}`, \n\t\t  icon: 'none' \n\t\t});\n\t}\n    \n    editPopup.value?.close();\n  } catch (error) {\n    console.error('降价失败:', error);\n    uni.showToast({ title: '降价失败', icon: 'none' });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 设置商品置顶\nconst setGoodsTop = async () => {\n  if (!currentGoods.value || currentGoods.value.isTop) return;\n\n  try {\n    isLoading.value = true;\n\n    const targetTopStatus = true;\n    \n\tconst productId = currentGoods.value.id\n    // 调用接口：路径参数（商品ID）\n    const res = await productApi.setGoodsTop(productId);\n    \n\tconsole.log('置顶情况',res)\n\t\n\tif(res.code === 200){\n\t\tuni.showToast({\n\t\t  title: '商品已申请置顶', \n\t\t  icon: 'success' \n\t\t});\n\t\tfetchMyGoods();\n\t\t//更新本地数据\n\t\tconst index = publishedGoods.value.findIndex(item => item.id === currentGoods.value.id);\n\t\tif (index !== -1) {\n\t\t  publishedGoods.value[index].isTop = targetTopStatus;\n\t\t}\n\t}else{\n\t\tuni.showToast({\n\t\t  title: `置顶失败：${res.msg}`, \n\t\t  icon: 'none' \n\t\t});\n\t}\n    \n    editPopup.value?.close();\n  } catch (error) {\n    console.error('置顶操作失败:', error);\n    uni.showToast({ title: '操作失败', icon: 'none' });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 设置商品上推荐\nconst setGoodsToHome = async () => {\n   if (!currentGoods.value || currentGoods.value.isOnHome) return;\n\n  try {\n    isLoading.value = true;\n    const targetStatus = true;\n\t\n\tconst productId = currentGoods.value.id\n\t\n    //申请推荐\n\tconst res = await productApi. setGoodsToHome(productId);\n    console.log('商品推荐的结果：',res)\n\t\n\tif(res.code === 200){\n\t\tuni.showToast({\n\t\t  title: '商品已申请上首页推荐', \n\t\t  icon: 'success' \n\t\t});\n\t\tawait fetchMyGoods();\n\t\t//更新本地数据\n\t\tconst index = publishedGoods.value.findIndex(item => item.id === currentGoods.value.id);\n\t\tif (index !== -1) {\n\t\t  publishedGoods.value[index].isOnHome = targetStatus;\n\t\t}\n\t}else{\n\t\tuni.showToast({\n\t\t  title: `推荐失败：${res.msg}`, \n\t\t  icon: 'none' \n\t\t});\n\t}\n    \n    editPopup.value?.close();\n  } catch (error) {\n    console.error('设置首页展示失败:', error);\n    uni.showToast({ title: '操作失败', icon: 'none' });\n  } finally {\n    isLoading.value = false;\n  }\n};\n\n// 确认售出\nconst confirmGoodsSold = async () => {\n  if (!currentGoods.value || currentGoods.value.status === '已完成') {\n    uni.showToast({ title: '该商品已售出', icon: 'none' });\n    return;\n  }\n  \n  // 二次确认\n  uni.showModal({\n    title: '确认售出',\n    content: '确定要将此商品标记为已售出吗？标记后将无法编辑',\n    confirmText: '确认',\n    cancelText: '取消',\n    success: async (res) => {\n      if (res.confirm) {\n        try {\n          isLoading.value = true;\n          // 调用状态更新接口：第一个参数是路径参数（商品ID），第二个是请求体（状态）\n          await productApi.updateGoodsStatus(\n            currentGoods.value.id, // 路径参数：商品ID\n            { status: 'sold' } \n          );\n          await fetchMyGoods();\n          //更新本地数据\n          const index = publishedGoods.value.findIndex(item => item.id === currentGoods.value.id);\n          if (index !== -1) {\n            publishedGoods.value[index].status = '已完成';\n          }\n          \n          uni.showToast({ title: '已标记为售出', icon: 'success' });\n          editPopup.value?.close();\n        } catch (error) {\n          console.error('标记售出失败:', error);\n          uni.showToast({ title: '操作失败', icon: 'none' });\n        } finally {\n          isLoading.value = false;\n        }\n      }\n    }\n  });\n};\n\n// 删除商品（调用接口）\nconst deleteGoods = async (id) => {\n  uni.showModal({\n    title: '确认删除',\n    content: '确定要删除该商品吗？删除后不可恢复',\n    confirmText: '删除',\n    cancelText: '取消',\n    success: async (res) => {\n      if (res.confirm) {\n        try {\n          isLoading.value = true;\n          // 调用删除接口\n          const deleteRes = await productApi.deleteGoods(id);\n\t\t  console.log('删除商品ID',id)\n          console.log('删除商品反馈',deleteRes)\n\t\t  \n\t\t  if(deleteRes.code===200){\n\t\t\tuni.showToast({ title: '商品已删除', icon: 'success' });  \n\t\t\t//更新本地数据\n\t\t\tpublishedGoods.value = publishedGoods.value.filter(item => item.id !== id);\n\t\t\tawait fetchMyGoods();\n\t\t  }else{\n\t\t\tuni.showToast({ title: `删除失败:${deleteRes.msg}`, icon: 'none' });  \n\t\t  }\n\t\t  \n        } catch (error) {\n          console.error('删除商品失败:', error);\n          uni.showToast({ title: '删除失败', icon: 'none' });\n        } finally {\n          isLoading.value = false;\n        }\n      }\n    }\n  });\n};\n\n// 跳转到发布商品页面\nconst goToPublish = () => {\n  uni.navigateTo({\n    url: `/pages/post/post`\n  });\n};\n</script>\n\n<style scoped>\n/* 样式部分保持不变 */\n.my-published-page {\n  background-color: #f5f7fa;\n  min-height: 100vh;\n  padding-bottom: 40rpx;\n}\n\n.list-note {\n  padding: 15rpx 20rpx;\n  background-color: #e6f7ff;\n  margin: 0 20rpx 20rpx;\n  border-radius: 10rpx;\n  display: flex;\n  align-items: center;\n  font-size: 26rpx;\n  color: #1890ff;\n}\n\n.note-icon {\n  margin-right: 10rpx;\n}\n\n.navbar {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100rpx;\n  padding: 0 30rpx;\n  background-color: #fff;\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n  position: sticky;\n  top: 0;\n  z-index: 999;\n}\n\n.nav-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #333;\n}\n\n.add-goods-btn {\n  display: flex;\n  align-items: center;\n  background-color: #7c89ff;\n  color: #fff;\n  font-size: 28rpx;\n  padding: 0 25rpx;\n  margin-right: 16rpx;\n  height: 60rpx;\n  border-radius: 30rpx;\n  box-shadow: 0 4rpx 12rpx rgba(124, 137, 255, 0.3);\n  transition: all 0.2s ease;\n}\n\n.add-goods-btn:hover {\n  background-color: #6a78e0;\n  transform: translateY(-2rpx);\n}\n\n.add-text {\n  margin-left: 8rpx;\n}\n\n.filter-container {\n  padding: 20rpx;\n  background-color: #fff;\n  margin-bottom: 20rpx;\n  box-shadow: 0 2rpx 5rpx rgba(0, 0, 0, 0.03);\n}\n\n.search-box {\n  display: flex;\n  align-items: center;\n  background-color: #f5f7fa;\n  border-radius: 60rpx;\n  padding: 0 20rpx;\n  height: 70rpx;\n  margin-bottom: 20rpx;\n}\n\n.search-icon {\n  margin-right: 10rpx;\n}\n\n.search-input {\n  flex: 1;\n  height: 100%;\n  font-size: 28rpx;\n  color: #333;\n  background: transparent;\n}\n\n.picker-container {\n  display: flex;\n  gap: 20rpx;\n  overflow-x: auto;\n  padding-bottom: 10rpx;\n}\n\n.picker-item {\n  display: flex;\n  align-items: center;\n  background-color: #f5f7fa;\n  border-radius: 40rpx;\n  padding: 0 20rpx;\n  height: 60rpx;\n  flex-shrink: 0;\n}\n\n.picker-label {\n  font-size: 28rpx;\n  color: #666;\n  margin-right: 10rpx;\n}\n\n.custom-picker {\n  width: auto;\n}\n\n.picker-display {\n  display: flex;\n  align-items: center;\n  font-size: 28rpx;\n  color: #333;\n  padding: 0 5rpx;\n}\n\n.picker-icon {\n  margin-left: 8rpx;\n}\n\n.goods-list {\n  padding: 0 20rpx;\n}\n\n.loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100rpx 0;\n  color: #7c89ff;\n}\n\n.loading-text {\n  margin-top: 20rpx;\n  font-size: 28rpx;\n}\n\n.goods-row {\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border-radius: 15rpx;\n  padding: 15rpx;\n  margin-bottom: 15rpx;\n  min-height: 180rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.03);\n}\n\n.goods-info {\n  display: flex;\n  flex: 1;\n  margin-right: 20rpx;\n  overflow: hidden;\n}\n\n.goods-img {\n  width: 140rpx;\n  height: 140rpx;\n  border-radius: 10rpx;\n  object-fit: cover;\n  flex-shrink: 0;\n  margin-right: 15rpx;\n}\n\n.goods-text-content {\n  flex: 1;\n  overflow: hidden;\n}\n\n.goods-title {\n  font-size: 30rpx;\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 10rpx;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.goods-meta {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15rpx;\n  margin-bottom: 10rpx;\n  font-size: 24rpx;\n}\n\n.goods-price {\n  color: #F56C6C;\n  font-weight: 600;\n}\n\n.publish-time, .goods-location {\n  color: #999;\n  display: flex;\n  align-items: center;\n}\n\n.goods-status {\n  display: flex;\n  align-items: center;\n  gap: 10rpx;\n  flex-wrap: wrap;\n}\n\n.status-badge {\n  padding: 3rpx 10rpx;\n  border-radius: 20rpx;\n  font-size: 22rpx;\n  font-weight: 500;\n}\n\n/* 状态标签样式补充 */\n.status-pending {\n  background-color: #e6f7ff;\n  color: #1890ff;\n}\n\n.status-onsale {\n  background-color: #f0f9eb;\n  color: #52c41a;\n}\n\n.status-rejected {\n  background-color: #fff1f0;\n  color: #f5222d;\n}\n\n.status-completed {\n  background-color: #f6f6f6;\n  color: #ffaa00;\n}\n\n.status-default {\n  background-color: #f6f6f6;\n  color: #8c8c8c;\n}\n\n.publish-badge {\n  padding: 3rpx 10rpx;\n  border-radius: 20rpx;\n  font-size: 22rpx;\n  font-weight: 500;\n}\n\n.publish-draft {\n  background-color: #f0f2f5;\n  color: #8c8c8c;\n}\n\n.publish-published {\n  background-color: #e6f7ff;\n  color: #1890ff;\n}\n\n.tags-container {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8rpx;\n}\n\n.goods-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 15rpx;\n  flex-shrink: 0;\n}\n\n.action-btn {\n  width: 60rpx;\n  height: 60rpx;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n}\n\n.edit-btn {\n  background-color: #ecf5ff;\n}\n\n.edit-btn.disabled {\n  background-color: #f5f5f5;\n}\n\n.delete-btn {\n  background-color: #fef0f0;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100rpx 0;\n  color: #ccc;\n}\n\n.empty-text {\n  margin-top: 20rpx;\n  margin-bottom: 40rpx;\n  font-size: 28rpx;\n}\n\n.publish-btn {\n  background-color: #7c89ff;\n  color: #fff;\n  font-size: 28rpx;\n  padding: 0 40rpx;\n  height: 70rpx;\n  border-radius: 35rpx;\n  box-shadow: 0 4rpx 12rpx rgba(124, 137, 255, 0.3);\n}\n\n.edit-popup {\n  --uni-popup-height: auto;\n}\n\n.edit-dialog {\n  background-color: #fff;\n  border-top-left-radius: 30rpx;\n  border-top-right-radius: 30rpx;\n  padding: 30rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 25rpx;\n}\n\n.price-edit-container {\n  display: flex;\n  align-items: center;\n  gap: 15rpx;\n  padding: 10rpx 0;\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.price-label {\n  font-size: 40rpx;\n  color: #333;\n  width: 300rpx;\n}\n\n.price-input {\n  flex: 1;\n  height: 80rpx;\n  font-size: 40rpx;\n  border: 1px solid #eee;\n  border-radius: 10rpx;\n  padding: 0 20rpx;\n}\n\n.action-buttons {\n  padding: 10rpx 0;\n  display: flex;\n  flex-direction: column;\n  gap: 15rpx;\n}\n\n.operation-btn {\n  width: 100%;\n  height: 80rpx;\n  font-size: 30rpx;\n  border-radius: 10rpx;\n  background-color: #fff;\n  color: #333;\n}\n\n.sell-btn {\n  background-color: #fff1f0;\n  color: #f5222d;\n  border: 1px solid #ffe3e3;\n}\n\n.confirm-price-btn {\n  width: 100%;\n  height: 80rpx;\n  background-color: #7c89ff;\n  color: #fff;\n  font-size: 30rpx;\n  border-radius: 10rpx;\n}\n\n.dialog-cancel {\n  width: 100%;\n  height: 80rpx;\n  background-color: #fff;\n  color: #333;\n  font-size: 30rpx;\n  border-radius: 10rpx;\n  border: 1px solid #eee;\n}\n</style>","import MiniProgramPage from 'C:/Users/86133/Desktop/demo/Lezhuan/pages/publish/publish.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onMounted","uni","productApi","computed","nextTick"],"mappings":"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"}