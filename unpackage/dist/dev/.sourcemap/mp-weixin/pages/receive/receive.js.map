{"version":3,"file":"receive.js","sources":["pages/receive/receive.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVjZWl2ZS9yZWNlaXZlLnZ1ZQ"],"sourcesContent":["<template>\n<view class=\"receive-page\">\t\n <!-- 弹窗：优先显示，关闭后展示页面内容 -->\n   <view class=\"popup-overlay\" v-if=\"showPopup\">\n     <view class=\"popup-container\">\n       <view class=\"popup-content\">【发布提醒】单页限一件物品，勿多物品混发；遵守平台规则及相应法律法规，为保障交易安全和用户的使用体验，我们将对发布内容逐一审核，违规严惩至封号！</view>\n       <button \n         class=\"popup-close-btn\" \n         @click=\"showPopup = false\"\n         :disabled=\"countdown > 0\"\n       >\n         {{ countdown > 0 ? `请等待 ${countdown} 秒` : '我知道了' }}\n       </button>\n     </view>\n   </view>\n  <view class=\"container\" v-if=\"!showPopup\">\n    <!-- 内容区域 -->\n    <!-- 状态栏占位 -->\n    <view class=\"statusBar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n    <!-- 自定义导航栏 -->\n    <view class=\"custom-nav\">\n      <view class=\"back-btn\" @click=\"handleBack\">\n        <uni-icons type=\"left\" size=\"24\"></uni-icons>\n      </view>\n      <view class=\"nav-title\">收宝贝</view>\n    </view>\n    <view class=\"content\">\n      \n\n      \n\n      <!-- 需求标题 -->\n      <view class=\"input-area1\">\n        <textarea \n          placeholder=\"填写需求名称\" \n          v-model=\"title\"\n          class=\"desc-input1\"\n          maxlength=\"50\"\n          auto-height\n        ></textarea>\n        <view class=\"word-count\">{{ title.length }}/50</view>\n      </view>\n\n      <!-- 需求描述 -->\n      <view class=\"input-area\">\n        <textarea \n          placeholder=\"描述一下你的需求以及写下您所在的宿舍区域能更好找到卖家哦~\" \n          v-model=\"description\"\n          class=\"desc-input\"\n          maxlength=\"500\"\n          auto-height\n        ></textarea>\n        <view class=\"word-count\">{{ description.length }}/500</view>\n      </view>\n\n      <!-- 联系方式输入 -->\n      <view class=\"input-area\">\n        <view class=\"contact-label\">联系方式</view>\n        <input \n          placeholder=\"请输入手机号或微信号\" \n          v-model=\"contactInfo\"\n          class=\"contact-input\"\n          maxlength=\"20\"\n          type=\"text\"\n          inputmode=\"tel\"\n        />\n        <view class=\"contact-hint\" v-if=\"contactInfo\">\n          {{ isPhone ? '手机号格式' : '微信号格式' }}\n        </view>\n      </view>\n\n      <!-- 选项区域 -->\n      <view class=\"options-list\">\n        <!-- 需求分类（picker选择器） -->\n        <picker mode=\"selector\" :range=\"categories\" range-key=\"name\" @change=\"onCategoryPicked\">\n          <view class=\"option-item\">\n            <view class=\"option-label\">需求分类</view>\n            <view class=\"option-value\">{{ selectedCategory || '请选择' }}</view>\n            <uni-icons type=\"right\" size=\"18\" color=\"#999\"></uni-icons>\n          </view>\n        </picker>\n        <!-- 预算 -->\n        <view class=\"option-item\" @click=\"handleOpenBudgetPopup\">\n          <view class=\"option-label\">预算</view>\n          <view class=\"option-value\">{{ budget ? '¥' + budget : '请填写' }}</view>\n          <uni-icons type=\"right\" size=\"18\" color=\"#999\"></uni-icons>\n        </view>\n        \n        <!-- 交易方式 -->\n        <view class=\"option-item\" @click=\"handleOpenTradePopup\">\n          <view class=\"option-label\">交易方式</view>\n          <view class=\"option-value\">{{ tradeMethod || '请选择' }}</view>\n          <uni-icons type=\"right\" size=\"18\" color=\"#999\"></uni-icons>\n        </view>\n      </view>\n\n      <view @click=\"onPublish\">\n        <button class=\"publish-btn\">发布</button>\n      </view>\n    </view>\n\n    <!-- 预算输入弹窗 -->\n    <uni-popup \n      ref=\"budgetPopup\"\n      type=\"bottom\"\n      background-color=\"#fff\"\n      :mask=\"true\"\n      :mask-click=\"true\"\n      class=\"custom-popup\"\n    >\n      <view class=\"popup-content\">\n        <view class=\"popup-title\">设置预算</view>\n        <view class=\"price-input-container\">\n          <text class=\"rmb-sign\">¥</text>\n          <input \n            type=\"number\" \n            v-model=\"budget\" \n            placeholder=\"请输入预算\"\n            class=\"price-input\"\n            keyboard-type=\"number-pad\"\n          >\n          </input>\n        </view>\n        <view class=\"notice\">\n          <text>注：诚心的填写预算，若预算与商品实际价值差距太大，则该需求将不被平台推送</text>\n        </view>\n        <view class=\"popup-buttons\">\n          <button class=\"cancel-btn\" @click=\"BudgetModalCancel\">取消</button>\n          <button class=\"confirm-btn\" @click=\"BudgetModalConfirm\">确定</button>\n        </view>\n      </view>\n    </uni-popup>\n\n    <!-- 交易方式弹窗 -->\n    <uni-popup \n      ref=\"tradePopup\"\n      type=\"bottom\"\n      background-color=\"#fff\"\n      class=\"custom-popup\"\n    >\n      <view class=\"popup-content\">\n        <view class=\"popup-title\">选择交易方式</view>\n        <view class=\"trade-methods\">\n          <view \n            class=\"trade-method\"\n            v-for=\"method in tradeMethods\" \n            :key=\"method.value\"\n            @click=\"selectTradeMethod(method.value)\"\n          >\n            {{ method.label }}\n            <uni-icons \n              type=\"checkmark\" \n              size=\"20\" \n              color=\"#FFCC00\"\n              v-if=\"tradeMethod === method.value\"\n            ></uni-icons>\n          </view>\n        </view>\n      </view>\n    </uni-popup>\n\n    <!-- 草稿确认弹窗 -->\n    <uni-popup \n      ref=\"draftPopup\"\n      type=\"center\"\n      background-color=\"#fff\"\n      :mask=\"true\"\n      :mask-click=\"false\"\n      class=\"custom-popup\"\n    >\n      <view class=\"popup-content\">\n        <view class=\"popup-title\">确认退出吗？</view>\n        <view class=\"popup-desc\" style=\"text-align:center; font-size:28rpx; color:#666; margin:32rpx 0;\">\n          已输入的内容可保存为草稿，下次继续编辑\n        </view>\n        <view class=\"popup-buttons\" style=\"gap:24rpx;\">\n          <button class=\"cancel-btn\" @click=\"handleDraftCancel\">确认退出</button>\n          <button class=\"confirm-btn\" @click=\"handleSaveDraft\">保存草稿</button>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</view>\n</template>\n\n<script setup>\nimport { ref, nextTick, onMounted, computed, onUnmounted } from 'vue';\nimport { onBackPress } from '@dcloudio/uni-app'; \nimport { useStorage } from '@/hooks/useStorage';\nimport productApi from '@/api/product.js';\nimport { getStatusBarHeight } from '@/utils/system.js';\nimport { ensureLoggedIn, ensureStudentCertified, ensureMembership } from '@/utils/uniHelper';\n\nconst { getStorage, setStorage } = useStorage();\n\n// 导航相关高度数据\nconst statusBarHeight = ref(0);\n\n// 1. 弹窗状态\n// 弹窗控制\nconst showPopup = ref(true);\n// 倒计时秒数\nconst countdown = ref(3);\n// 定时器标识\nlet timer = null;\n// 启动倒计时函数\nconst startCountdown = () => {\n  timer = setInterval(() => {\n    if (countdown.value > 0) {\n      countdown.value--;\n    } else {\n      clearInterval(timer);\n    }\n  }, 1000);\n};\n\n// 从本地缓存加载草稿\nconst loadDraftFromStorage = () => {\n  try {\n    const draft = getStorage('demandDraft');\n\tconsole.log('草稿内容为:',draft)\n    if (draft && typeof draft === 'object') {\n      // 回显表单数据\n      title.value = draft.title || '';\n      description.value = draft.description || '';\n      contactInfo.value = draft.contactInfo || '';\n      budget.value = draft.budget || '';\n      tradeMethod.value = draft.tradeMethod || '';\n      selectedCategory.value = draft.selectedCategory || '';\n      selectedCategoryId.value = draft.categoryId || null;\n    }\n  } catch (error) {\n    console.error('加载草稿失败:', error);\n  }\n};\n\n// 需求分类数据（与数据库 id 序列一致）\nconst categories = [\n  { id: 1, name: '电子数码' },\n  { id: 2, name: '其他' },\n  { id: 3, name: '生活用品' },\n  { id: 4, name: '虚拟物品' },\n  { id: 5, name: '自行车' },\n  { id: 6, name: '体育用品' },\n  { id: 7, name: '电器' },\n  { id: 8, name: '二手书' }\n];\n\n// 分类选择状态\nconst selectedCategory = ref('');\nconst selectedCategoryId = ref(null);\n\n// picker 选择回调\nconst onCategoryPicked = (e) => {\n  const index = e?.detail?.value;\n  const category = categories[index];\n  if (!category) return;\n  selectedCategory.value = category.name;\n  // 直接使用数据库中的分类 id\n  selectedCategoryId.value = category.id;\n};\n\n// 表单数据\nconst title = ref('');\nconst description = ref('');\nconst contactInfo = ref('');\nconst budget = ref('');\nconst tradeMethod = ref('');\n\n// 联系方式类型判断\nconst isPhone = computed(() => {\n  return /^1[3-9]\\d{9}$/.test(contactInfo.value);\n});\n\n// 交易方式数据\nconst tradeMethods = [\n  { label: '线下自行交易', value: '线下自行交易' },\n];\n\n// 预算弹窗控制\nconst budgetPopup = ref(null);\nconst handleOpenBudgetPopup = async () => {\n  try {\n    await nextTick();\n    budgetPopup.value?.open('bottom'); \n  } catch (error) {\n    console.error('打开预算弹窗失败:', error);\n    uni.showToast({ title: '打开预算弹窗失败', icon: 'none' });\n  }\n};\n\nconst BudgetModalCancel = () => {\n  budgetPopup.value?.close();\n  budget.value = '';\n};\n\nconst BudgetModalConfirm = () => {\n  if (!budget.value) {\n    uni.showToast({ title: '请输入预算', icon: 'none' });\n    return;\n  }\n  budgetPopup.value?.close();\n};\n\n// 交易方式弹窗控制\nconst tradePopup = ref(null);\nconst handleOpenTradePopup = async () => {\n  try {\n    await nextTick();\n    tradePopup.value?.open('bottom');\n  } catch (error) {\n    console.error('打开交易方式弹窗失败:', error);\n    uni.showToast({ title: '打开交易方式弹窗失败', icon: 'none' });\n  }\n};\n\nconst selectTradeMethod = (value) => {\n  tradeMethod.value = value;\n  tradePopup.value.close();\n};\n\n// 发布需求\nconst onPublish = async () => {\n  // 发布前再次拦截，防止绕过入口直接请求接口\n  if (!ensureLoggedIn({ content: '登录后才能发布需求', redirectTo: '/pages/mine/mine' })) return;\n  if (!ensureStudentCertified({ content: '发布需求需先完成学生认证' })) return;\n  if (!ensureMembership('platinum', { content: '发布需求需白金会员' })) return;\n  // 严格验证必填项\n  if (!selectedCategoryId.value) {\n    uni.showToast({ title: '请选择需求分类', icon: 'none' });\n    return;\n  }\n  \n  if (!title.value.trim()) {\n    uni.showToast({ title: '请填写需求标题', icon: 'none' });\n    return;\n  }\n  \n  if (!description.value.trim()) {\n    uni.showToast({ title: '请填写需求描述', icon: 'none' });\n    return;\n  }\n  \n  if (!contactInfo.value.trim()) {\n    uni.showToast({ title: '请填写联系方式', icon: 'none' });\n    return;\n  }\n  \n  if (!budget.value) {\n    uni.showToast({ title: '请填写预算', icon: 'none' });\n    handleOpenBudgetPopup();\n    return;\n  }\n  \n  if (!tradeMethod.value) {\n    uni.showToast({ title: '请选择交易方式', icon: 'none' });\n    handleOpenTradePopup();\n    return;\n  }\n  \n  // 构建提交数据（确保categoryId与后端一致）\n  const requesterId = getStorage('userId');\n  const demandData = {\n    title: title.value,\n    description: description.value.trim(),\n    budget: Number(budget.value),\n    requesterId: requesterId,\n    categoryName: selectedCategory.value,\n    categoryId: selectedCategoryId.value, // 直接使用选择的分类id\n    contactInfo: contactInfo.value.trim(),\n    tradeMethod: tradeMethod.value,\n  };\n  \n  console.log('发布需求数据:', demandData);\n  \n  // 提交发布（后续根据后端接口调整）\n  try {\n    const createDemandRes = await productApi.postDemand(demandData);\n    console.log('发布结果:', createDemandRes);\n    \n    if (createDemandRes.code === 200 || createDemandRes.code === 201) {\n      uni.showToast({ title: '发布成功', icon: 'success' });\n      resetForm();\n      uni.removeStorageSync('demandDraft');\n      setTimeout(() => {\n        uni.navigateTo({ url: '/pages/wait/wait' });\n      }, 500);\n    } else if (createDemandRes.code === 403) {\n      const msg = createDemandRes.msg || createDemandRes.message || '发布受限，请稍后再试';\n      uni.showModal({\n        title: '发布提醒',\n        content: msg,\n        confirmText: '知道了',\n        showCancel: false\n      });\n    } else {\n      uni.showToast({ title: createDemandRes.msg || createDemandRes.message || '发布失败', icon: 'none' });\n    }\n  } catch (error) {\n    console.error('发布失败:', error);\n    uni.showToast({ title: '网络异常，发布失败', icon: 'none' });\n  }\n};\n\n// 草稿相关\nconst draftPopup = ref(null);\nconst draftData = ref({});\n\nconst handleDraftCancel = () => {\n  draftPopup.value?.close();\n  setTimeout(() => {\n    uni.navigateBack({ delta: 1 });\n  }, 300);\n};\n\nconst handleSaveDraft = () => {\n  draftData.value = {\n      title: title.value,\n      description: description.value,\n      contactInfo: contactInfo.value,\n      budget: budget.value,\n      tradeMethod: tradeMethod.value,\n      categoryId: selectedCategoryId.value,\n      selectedCategory: selectedCategory.value,\n      saveTime: new Date().getTime()\n    };\n  \n  // 保存到本地存储\n  setStorage('demandDraft', draftData.value);\n  console.log('需求草稿内容为：',draftData.value)\n  \n  uni.showToast({ title: '草稿保存成功', icon: 'success' });\n  draftPopup.value?.close();\n  setTimeout(() => {\n    uni.navigateBack({ delta: 1 });\n  }, 1500);\n};\n\n// 返回处理\nconst handleBack = () => {\n  if (title.value || description.value || contactInfo.value || \n      budget.value || tradeMethod.value || \n      selectedCategoryId.value) {\n    draftPopup.value?.open('center');\n    return true;\n  } else {\n    uni.navigateBack({ delta: 1 });\n    return false;\n  }\n};\n\nonBackPress((options) => {\n  if (options.from === 'backbutton') {\n    return handleBack();\n  }\n  return false;\n});\n\n// 重置表单\nconst resetForm = () => {\n  title.value = '';\n  description.value = '';\n  contactInfo.value = '';\n  budget.value = '';\n  tradeMethod.value = '';\n  selectedCategory.value = '';\n  selectedCategoryId.value = null;\n  \n  // 关闭弹窗\n  budgetPopup.value?.close();\n  tradePopup.value?.close();\n  draftPopup.value?.close();\n};\n\n// 生命周期钩子\nonMounted(() => {\n  // 未登录弹窗提醒；仍启动倒计时，避免弹窗卡住\n  if (!ensureLoggedIn({ content: '登录后才能发布需求', redirectTo: '/pages/mine/mine' })) {\n    startCountdown();\n    return;\n  }\n  // 进入页面进行权限与认证拦截\n  if (!ensureStudentCertified({ content: '发布需求需先完成学生认证' })) {\n    startCountdown();\n    return;\n  }\n  if (!ensureMembership('platinum', { content: '发布需求需白金会员' })) {\n    startCountdown();\n    return;\n  }\n  statusBarHeight.value = getStatusBarHeight();\n  loadDraftFromStorage(); \n  // 启动倒计时\n  startCountdown();\n});\n\nonUnmounted(() => {\n  // 组件卸载时清除定时器\n  if (timer) {\n    clearInterval(timer);\n  }\n});\n</script>\n\n<style scoped>\n.container {\n  flex: 1;\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n.publish-btn {\n  color: #fff;\n  background-color: #FFCC00;\n  border-radius: 30rpx;\n  font-size: 36rpx;\n  width: 100%;\n  margin-top: 15rpx;\n}\n\n/* 分类选择器样式 */\n.category-selectors {\n  position: relative;\n  width: 100%;\n  margin-bottom: 24rpx;\n}\n\n.select-row {\n  border: 1px solid #eee;\n  border-radius: 8rpx;\n  overflow: hidden;\n  background-color: #fff;\n}\n\n.select-item {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24rpx 30rpx;\n  font-size: 30rpx;\n}\n\n.select-value {\n  color: #666;\n}\n\n.rotate-icon {\n  transform: rotate(180deg);\n  transition: transform 0.3s ease;\n}\n\n.select-panel {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 99;\n  max-height: 800rpx;\n  overflow-y: auto;\n}\n\n.category-selector-group {\n  position: relative;\n}\n\n.panel-content {\n  background-color: #fff;\n  border: 1px solid #eee;\n  border-top: none;\n  border-radius: 0 0 8rpx 8rpx;\n}\n\n/* 选项列表 */\n.options-list {\n  background-color: #fff;\n  border-radius: 16rpx;\n  overflow: hidden;\n  margin-bottom: 24rpx;\n}\n\n.option-item {\n  display: flex;\n  justify-content: space-between; /* 确保标签居左，内容居右 */\n  align-items: center;\n  padding: 28rpx 30rpx; /* 增加左右内边距，让内容更舒展 */\n  border-bottom: 1px solid #eee;\n  font-size: 32rpx;\n}\n\n.option-item:nth-child(2n) {\n  border-right: none;\n}\n\n.option-item:active {\n  background-color: #f5f5f5;\n}\n\n.option-label {\n  color: #333;\n  min-width: 120rpx; /* 给标签固定最小宽度，避免内容挤压 */\n}\n\n.option-value {\n  color: #999;\n  margin-right: 10rpx; /* 减少与箭头的距离，避免内容过右 */\n  flex: 1; /* 让内容区域自适应宽度 */\n  text-align: right; /* 确保内容靠右对齐 */\n}\n\n/* 输入区域 */\n.input-area1 {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  margin-top: 83rpx;\n  margin-bottom: 20rpx;\n}\n\n.input-area {\n  background-color: #fff;\n  border-radius: 16rpx;\n  padding: 24rpx;\n  margin-bottom: 24rpx;\n}\n\n.desc-input1 {\n  width: 100%;\n  min-height: 40rpx;\n  font-size: 32rpx;\n  line-height: 1.5;\n}\n\n.desc-input {\n  width: 100%;\n  min-height: 140rpx;\n  font-size: 32rpx;\n  line-height: 1.5;\n}\n\n.word-count {\n  text-align: right;\n  font-size: 28rpx;\n  color: #999;\n  margin-top: 12rpx;\n}\n\n/* 联系方式样式 */\n.contact-label {\n  font-size: 30rpx;\n  color: #333;\n  margin-bottom: 16rpx;\n}\n\n.contact-input {\n  width: 100%;\n  height: 80rpx;\n  font-size: 32rpx;\n  border: 1px solid #eee;\n  border-radius: 8rpx;\n  padding: 0 16rpx;\n  box-sizing: border-box;\n}\n\n.contact-hint {\n  margin-top: 12rpx;\n  font-size: 26rpx;\n  color: #007aff;\n}\n\n/* 选项列表 */\n.options-list {\n  background-color: #fff;\n  border-radius: 16rpx;\n  overflow: hidden;\n  margin-bottom: 24rpx;\n}\n\n.option-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 28rpx 24rpx;\n  border-bottom: 1px solid #eee;\n  font-size: 32rpx;\n}\n\n.option-item:last-child {\n  border-bottom: none;\n}\n\n.option-label {\n  color: #333;\n}\n\n.option-value {\n  color: #999;\n  margin-right: 20rpx;\n}\n\n/* 弹窗样式 */\n.custom-popup {\n  width: 100%;\n}\n\n.popup-content {\n  background-color: #fff;\n  border-radius: 24rpx 24rpx 0 0;\n  padding: 32rpx;\n}\n\n.popup-title {\n  font-size: 36rpx;\n  font-weight: 500;\n  text-align: center;\n  margin-bottom: 32rpx;\n  padding-bottom: 24rpx;\n  border-bottom: 1px solid #eee;\n}\n\n/* 预算弹窗 */\n.price-input-container {\n  display: flex;\n  align-items: center;\n  padding: 24rpx;\n  border: 1px solid #eee;\n  border-radius: 12rpx;\n  margin-bottom: 20rpx;\n}\n\n.rmb-sign {\n  font-size: 40rpx;\n  color: #333;\n  margin-right: 16rpx;\n}\n\n.price-input {\n  flex: 1;\n  font-size: 28rpx;\n  height: 80rpx;\n}\n\n.notice {\n  font-size: 30rpx;\n  color: #999;\n  margin-bottom: 60rpx;\n}\n\n.popup-buttons {\n  display: flex;\n  gap: 24rpx;\n}\n\n.popup-buttons button {\n  flex: 1;\n  height: 96rpx;\n  line-height: 96rpx;\n  font-size: 32rpx;\n  border-radius: 12rpx;\n}\n\n.cancel-btn {\n  background-color: #f5f5f5;\n  color: #333;\n}\n\n.confirm-btn {\n  background-color: #FFCC00;\n  color: #fff;\n}\n\n/* 交易方式弹窗 */\n.trade-methods {\n  padding-top: 16rpx;\n}\n\n.trade-method {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 28rpx 0;\n  font-size: 32rpx;\n  border-bottom: 1px solid #eee;\n}\n\n.trade-method:last-child {\n  border-bottom: none;\n}\n\n/* 自定义导航栏样式 */\n.custom-nav {\n  height: calc(var(--status-bar-height) + 44px);\n  padding-top: var(--status-bar-height);\n  background-color: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 999;\n  border-bottom: 1px solid #eee;\n}\n\n.back-btn {\n  position: absolute;\n  left: 16px;\n  width: 44px;\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.nav-title {\n  font-size: 17px;\n  font-weight: 500;\n  color: #333;\n}\n\n.content {\n  padding-top: calc(var(--status-bar-height) + 32px);\n  padding-left: 16px;\n  padding-right: 16px;\n  padding-bottom: 16px;\n  box-sizing: border-box;\n}\n\n.statusBar {\n  background-color: #fff;\n  width: 100%;\n}\n\n/* 弹窗样式：居中显示，半透明遮罩 */\n.popup-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n}\n.popup-container {\n  width: 60%;\n  background-color: #fff;\n  border-radius: 24rpx;\n  padding: 40rpx 30rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 30rpx;\n}\n.popup-content {\n  font-size: 24rpx;\n  color: #333;\n  text-align: center;\n}\n.popup-close-btn {\n  width: 180rpx;\n  height: 70rpx;\n  line-height: 70rpx;\n  background-color: #007aff;\n  color: #fff;\n  border-radius: 35rpx;\n  font-size: 28rpx;\n  padding: 0;\n}\n.popup-close-btn:disabled {\n  opacity: 0.7;\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n</style>","import MiniProgramPage from 'C:/Users/86133/Desktop/demo/Lezhuan/pages/receive/receive.vue'\nwx.createPage(MiniProgramPage)"],"names":["useStorage","ref","uni","computed","nextTick","ensureLoggedIn","ensureStudentCertified","ensureMembership","productApi","onBackPress","onMounted","getStatusBarHeight","onUnmounted"],"mappings":"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"}