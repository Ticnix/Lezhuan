{"version":3,"file":"notice.js","sources":["pages/notice/notice.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWNlL25vdGljZS52dWU"],"sourcesContent":["<template>\n  <view class=\"notification-page\">\n    <!-- 顶部导航栏 -->\n    <view class=\"navbar\">\n      <text class=\"title\">消息通知</text>\n      <view class=\"filter-btn\" @click=\"showFilter = !showFilter\">\n        <uni-icons type=\"filter\" size=\"24\"></uni-icons>\n      </view>\n    </view>\n\n    <!-- 筛选面板 -->\n    <view class=\"filter-panel\" v-if=\"showFilter\">\n      <view class=\"filter-item\">\n        <text class=\"filter-label\">通知类型:</text>\n        <picker @change=\"handleTypeChange\" :value=\"typeIndex\" :range=\"typeOptions\">\n          <view class=\"picker-view\">{{ typeOptions[typeIndex] }}</view>\n        </picker>\n      </view>\n      <view class=\"filter-item\">\n        <text class=\"filter-label\">阅读状态:</text>\n        <picker @change=\"handleReadChange\" :value=\"readIndex\" :range=\"readOptions\">\n          <view class=\"picker-view\">{{ readOptions[readIndex] }}</view>\n        </picker>\n      </view>\n      <view class=\"filter-actions\">\n        <button class=\"reset-btn\" @click=\"resetFilter\">重置</button>\n        <button class=\"confirm-btn\" @click=\"confirmFilter\">确认</button>\n      </view>\n    </view>\n\n    <!-- 通知列表 -->\n    <scroll-view\n      class=\"notification-list\"\n      scroll-y\n      @scrolltolower=\"loadMore\"\n      refresher-enabled\n      @refresherrefresh=\"onRefresh\"\n      refresher-threshold=\"80\"\n    >\n      <!-- 通知项：每条独立控制滑动 -->\n      <view \n        class=\"notification-item\" \n        v-for=\"(item, index) in notificationList\" \n        :key=\"item.id\"\n        :class=\"{ 'unread': !item.isRead }\"\n      >\n        <!-- 滑动容器：控制通知内容左滑 -->\n        <view \n          class=\"slide-content\" \n          :style=\"{ transform: `translateX(${getSwipeOffset(item.id)}px)` }\"\n          @touchstart=\"handleTouchStart($event, item.id)\"\n          @touchmove=\"handleTouchMove($event, item.id)\"\n          @touchend=\"handleTouchEnd(item.id)\"\n        >\n          <!-- 未读标识 -->\n          <view class=\"unread-dot\" v-if=\"!item.isRead\"></view>\n          \n          <!-- 通知内容：点击展开详情 -->\n          <view class=\"notification-content\" @click=\"handleNotificationClick(item)\">\n            <view class=\"notification-header\">\n              <text class=\"notification-type\">{{ getTypeName(item.type) }}</text>\n              <text class=\"notification-time\">{{ formatTime(item.createTime) }}</text>\n            </view>\n            <view class=\"notification-body\">\n              <text class=\"notification-message\">{{ item.content }}</text>\n            </view>\n            <!-- 展开详情区域 -->\n            <view class=\"notification-detail\" v-if=\"expandedId === item.id\">\n              <view class=\"detail-line\">\n                <text class=\"detail-label\">通知ID：</text>\n                <text class=\"detail-value\">{{ item.id }}</text>\n              </view>\n              <view class=\"detail-line\">\n                <text class=\"detail-label\">完整内容：</text>\n                <text class=\"detail-value\">{{ item.content }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n        \n        <!-- 删除按钮：仅当前滑动的通知显示 -->\n        <view \n          class=\"delete-btn\" \n          v-if=\"isItemSwiped(item.id)\"\n          @click.stop=\"handleDelete(item.id)\"\n        >\n          删除\n        </view>\n      </view>\n\n      <!-- 空状态 -->\n      <view class=\"empty-state\" v-if=\"notificationList.length === 0 && !isLoading\">\n        <uni-icons type=\"notification\" size=\"60\" color=\"#ccc\"></uni-icons>\n        <text class=\"empty-text\">暂无通知</text>\n      </view>\n\n      <!-- 加载提示 -->\n      <view class=\"loading-more\" v-if=\"isLoading\">\n        <uni-icons type=\"loading\" size=\"24\" color=\"#777\" spin></uni-icons>\n        <text class=\"loading-text\">加载中...</text>\n      </view>\n\n      <!-- 没有更多 -->\n      <view class=\"no-more\" v-if=\"!hasMore && notificationList.length > 0\">\n        <text>没有更多通知了</text>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport noticeApi from '@/api/notice.js';\nimport { ensureLoggedIn, ensureMembership } from '@/utils/uniHelper';\n\n// 页面状态\nconst notificationList = ref([]);\nconst isLoading = ref(false);\nconst hasMore = ref(true);\nconst page = ref(1);\nconst pageSize = ref(10);\n\n// 筛选条件\nconst showFilter = ref(false);\nconst typeOptions = ['全部类型', '系统通知', '交易提醒', '消息互动'];\nconst readOptions = ['全部状态', '未读', '已读'];\nconst typeIndex = ref(0);\nconst readIndex = ref(0);\nconst expandedId = ref(null); \nconst filterParams = ref({ type: '', isRead: null });\n\n// 关键：每条通知独立存储滑动状态（id: 偏移量）\nconst swipeOffsets = ref({}); // 格式：{ \"通知id1\": -80, \"通知id2\": 0 }\nconst startXMap = ref({}); // 存储每条通知的触摸起始X坐标\n\n// 页面加载初始化\nonLoad(() => {\n  // 需登录后查看通知\n  if (!ensureLoggedIn({ content: '登录后才能查看系统通知', redirectTo: '/pages/mine/mine' })) return;\n  fetchNotifications(true);\n});\n\n// 获取通知列表\nconst fetchNotifications = async (isRefresh = false) => {\n  if (isLoading.value && !isRefresh) return;\n  isLoading.value = true;\n\n  try {\n    if (isRefresh) {\n      page.value = 1;\n      hasMore.value = true;\n      swipeOffsets.value = {}; // 刷新时重置所有滑动状态\n    }\n\n    const params = {\n      page: page.value,\n      size: pageSize.value,\n      ...(filterParams.value.type && { type: filterParams.value.type }),\n      ...(filterParams.value.isRead !== null && { isRead: filterParams.value.isRead })\n    };\n\n    const res = await noticeApi.getNotificationList(params);\n    if (res.code === 403) {\n      // 非会员权限不足：引导开通会员\n      ensureMembership('normal', {\n        title: '系统通知权限不足',\n        content: '开通会员后可查看系统通知的具体内容',\n        confirmText: '去开通'\n      });\n    } else if (res.code === 200 && res.data) {\n      const rawRecords = res.data.notifications || [];\n      const records = rawRecords.map(item => ({\n        id: item.id,\n        type: item.notificationType,\n        content: item.content,\n        // 兼容后端字段差异：优先使用 createAt，其次 createTime / createdAt\n        createTime: item.createAt || item.createTime || item.createdAt,\n        isRead: item.isRead || false\n      }));\n\n      notificationList.value = isRefresh ? records : [...notificationList.value, ...records];\n      hasMore.value = notificationList.value.length < res.data.total;\n      page.value = res.data.current + 1;\n    } else {\n      // 其他错误状态统一提示\n      uni.showToast({ title: '获取通知失败', icon: 'none' });\n    }\n  } catch (error) {\n    console.error('获取通知失败:', error);\n    uni.showToast({ title: '网络错误，请重试', icon: 'none' });\n  } finally {\n    isLoading.value = false;\n    if (isRefresh) uni.stopPullDownRefresh();\n  }\n};\n\n// 触摸开始：记录当前通知的起始位置\nconst handleTouchStart = (e, itemId) => {\n  startXMap.value[itemId] = e.touches[0].clientX;\n  // 其他通知复位（可选：避免多条同时滑动）\n  Object.keys(swipeOffsets.value).forEach(id => {\n    if (id !== itemId) swipeOffsets.value[id] = 0;\n  });\n};\n\n// 触摸移动：计算当前通知的偏移量（仅左滑，最大-80px）\nconst handleTouchMove = (e, itemId) => {\n  const startX = startXMap.value[itemId];\n  const moveX = e.touches[0].clientX;\n  const offset = startX - moveX; // 左滑偏移量为正\n  // 限制偏移量：0（不滑）到-80（完全露出删除按钮）\n  swipeOffsets.value[itemId] = Math.max(-80, Math.min(0, -offset));\n};\n\n// 触摸结束：不足30px复位，否则固定-80px\nconst handleTouchEnd = (itemId) => {\n  if (Math.abs(swipeOffsets.value[itemId]) < 30) {\n    swipeOffsets.value[itemId] = 0;\n  } else {\n    swipeOffsets.value[itemId] = -80;\n  }\n};\n\n// 获取当前通知的滑动偏移量\nconst getSwipeOffset = (itemId) => {\n  return swipeOffsets.value[itemId] || 0;\n};\n\n// 判断当前通知是否处于滑动状态（是否显示删除按钮）\nconst isItemSwiped = (itemId) => {\n  return Math.abs(swipeOffsets.value[itemId] || 0) >= 30;\n};\n\n// 删除通知：调用接口并更新列表\nconst handleDelete = async (itemId) => {\n  try {\n    const res = await noticeApi.deleteNotification(itemId);\n    // 从列表中移除\n    notificationList.value = notificationList.value.filter(item => item.id !== itemId);\n    // 清除该通知的滑动状态\n    delete swipeOffsets.value[itemId];\n\tif(res.code===200){\n\t  uni.showToast({ title: '删除成功', icon: 'success' });\n\t}else{\n\t  uni.showToast({ title: '删除失败', icon: 'none' });\n\t}\n  } catch (error) {\n    console.error('删除通知失败:', error);\n    uni.showToast({ title: '删除失败，请重试', icon: 'none' });\n  }\n};\n\n// 其他原有方法（下拉刷新、加载更多、点击展开等）\nconst onRefresh = () => fetchNotifications(true);\nconst loadMore = () => {\n  if (!hasMore.value || isLoading.value) return;\n  fetchNotifications();\n};\n\nconst handleNotificationClick = async (item) => {\n  // 展开内容不限制，但尝试标记为已读时处理权限\n  if (!item.isRead) {\n    try {\n      const markRes = await noticeApi.markAsRead(item.id);\n      if (markRes && markRes.code === 200) {\n        item.isRead = true;\n        uni.showToast({ title: '已标记为已读', icon: 'none' });\n      } else if (markRes && markRes.code === 403) {\n        ensureMembership('normal', {\n          title: '会员权限不足',\n          content: '标记已读与查看完整内容需会员权限',\n          confirmText: '去开通'\n        });\n      } else {\n        uni.showToast({ title: '标记失败', icon: 'none' });\n      }\n    } catch (error) {\n      uni.showToast({ title: '标记失败', icon: 'none' });\n    }\n  }\n  expandedId.value = expandedId.value === item.id ? null : item.id;\n};\n\nconst handleTypeChange = (e) => { typeIndex.value = e.detail.value; };\nconst handleReadChange = (e) => { readIndex.value = e.detail.value; };\nconst resetFilter = () => {\n  typeIndex.value = 0;\n  readIndex.value = 0;\n  filterParams.value = { type: '', isRead: null };\n};\nconst confirmFilter = () => {\n  filterParams.value = {\n    type: typeIndex.value === 0 ? '' : \n           typeIndex.value === 1 ? 'system' :\n           typeIndex.value === 2 ? 'trade' : 'message',\n    isRead: readIndex.value === 0 ? null : readIndex.value === 1 ? false : true\n  };\n  fetchNotifications(true);\n  showFilter.value = false;\n};\n\n// 时间格式化\nconst formatTime = (timestamp, format = 'short') => {\n  if (!timestamp) return '';\n  const date = new Date(timestamp);\n  const year = date.getFullYear();\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\n  const day = date.getDate().toString().padStart(2, '0');\n  const hour = date.getHours().toString().padStart(2, '0');\n  const minute = date.getMinutes().toString().padStart(2, '0');\n\n  if (format === 'full') return `${year}-${month}-${day} ${hour}:${minute}`;\n  \n  const diff = new Date() - date;\n  const minutes = Math.floor(diff / 60000);\n  if (minutes < 60) return `${minutes}分钟前`;\n  const hours = Math.floor(minutes / 60);\n  if (hours < 24) return `${hours}小时前`;\n  const days = Math.floor(hours / 24);\n  return days < 30 ? `${days}天前` : `${year}-${month}-${day}`;\n};\n\n// 通知类型名称\nconst getTypeName = (type) => {\n  switch (type) {\n    case 'system': return '系统通知';\n    case 'trade': return '交易提醒';\n    case 'message': return '消息互动';\n    default: return '通知';\n  }\n};\n</script>\n\n<style scoped>\n.notification-page {\n  min-height: 100vh;\n  background-color: #f5f7f7;\n}\n\n/* 导航栏 */\n.navbar {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 44px;\n  padding: 0 16px;\n  background-color: #fff;\n  border-bottom: 1px solid #eee;\n}\n\n.title {\n  font-size: 18px;\n  font-weight: 500;\n  color: #333;\n}\n\n.filter-btn {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* 筛选面板 */\n.filter-panel {\n  background-color: #fff;\n  padding: 16px;\n  border-bottom: 1px solid #eee;\n}\n\n.filter-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.filter-label {\n  width: 80px;\n  font-size: 14px;\n  color: #666;\n}\n\n.picker-view {\n  flex: 1;\n  height: 36px;\n  line-height: 36px;\n  font-size: 14px;\n  color: #333;\n}\n\n.filter-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  margin-top: 20px;\n}\n\n.reset-btn, .confirm-btn {\n  width: 80px;\n  height: 36px;\n  line-height: 36px;\n  padding: 0;\n  font-size: 14px;\n}\n\n.reset-btn {\n  background-color: #f5f5f5;\n  color: #666;\n}\n\n.confirm-btn {\n  background-color: #007aff;\n  color: #fff;\n}\n\n/* 通知列表 */\n.notification-list {\n  flex: 1;\n  height: calc(100vh - 44px);\n}\n\n/* 通知项：相对定位，承载滑动内容和删除按钮 */\n.notification-item {\n  position: relative;\n  display: flex;\n  background-color: #fff;\n  border-bottom: 1px solid #f5f5f5;\n  overflow: hidden; /* 隐藏超出的删除按钮 */\n}\n\n.notification-item.unread {\n  background-color: #f9f9ff;\n}\n\n/* 滑动内容：左滑主体 */\n.slide-content {\n  display: flex;\n  width: 100%;\n  padding: 16px;\n  transition: transform 0.3s ease; /* 滑动动画 */\n}\n\n/* 未读标识 */\n.unread-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: #007aff;\n  margin-top: 8px;\n  margin-right: 12px;\n}\n\n/* 通知内容区 */\n.notification-content {\n  flex: 1;\n}\n\n.notification-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n\n.notification-type {\n  font-size: 15px;\n  font-weight: 500;\n  color: #333;\n}\n\n.notification-time {\n  font-size: 12px;\n  color: #999;\n}\n\n.notification-body {\n  overflow: hidden;\n}\n\n.notification-message {\n  font-size: 14px;\n  color: #666;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* 详情展开区域 */\n.notification-detail {\n  margin-top: 16rpx;\n  padding-top: 16rpx;\n  border-top: 1rpx dashed #eee;\n  background-color: #fafafa;\n  border-radius: 8rpx;\n  padding: 16rpx;\n}\n\n.detail-line {\n  display: flex;\n  margin-bottom: 12rpx;\n  font-size: 24rpx;\n}\n\n.detail-label {\n  width: 140rpx;\n  color: #999;\n  font-weight: 500;\n}\n\n.detail-value {\n  flex: 1;\n  color: #666;\n  word-break: break-all; /* 防止长文本溢出 */\n}\n\n/* 删除按钮：固定在右侧，默认隐藏 */\n.delete-btn {\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: 180rpx;\n  background-color: #ff4d4f;\n  color:#fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1; /* 确保在内容上方 */\n}\n\n/* 点击反馈优化 */\n.slide-content {\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.slide-content:active {\n  background-color: #f0f0f0;\n}\n\n/* 空状态 */\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding-top: 100px;\n  color: #ccc;\n}\n\n.empty-text {\n  margin-top: 16px;\n  font-size: 14px;\n}\n\n/* 加载更多 */\n.loading-more {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px 0;\n  color: #777;\n}\n\n.loading-text {\n  margin-left: 8px;\n  font-size: 14px;\n}\n\n/* 没有更多 */\n.no-more {\n  text-align: center;\n  padding: 20px 0;\n  font-size: 14px;\n  color: #999;\n}\n</style>","import MiniProgramPage from 'C:/Users/86133/Desktop/demo/Lezhuan/pages/notice/notice.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","ensureLoggedIn","noticeApi","ensureMembership","uni"],"mappings":"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"}