{"version":3,"file":"index.js","sources":["pages/index/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n    <!-- 遮罩层 -->\n    <view class=\"modal-mask\" v-if=\"showNoticeModal\"></view>\n    <!-- 弹窗容器 -->\n    <view class=\"modal-container\" v-if=\"showNoticeModal\">\n      <view class=\"modal-title\">公告</view>\n      <view class=\"modal-content\">\n        商品/需求发布审核工作时间为8:00-22:00，为保障用户的使用体验和交易安全，我们会进行严格审核，非工作时段发布的商品审核将有所延缓，请谅解！\n      </view>\n      <view class=\"modal-buttons\">\n        <button class=\"modal-btn\" @click=\"close\">关闭</button>\n        <button class=\"modal-btn modal-btn-primary\" @click=\"goTo\">前往</button>\n      </view>\n    </view>\n  <view class=\"container\">\n    <!-- 背景容器 -->\n    <view class=\"background-container\" :style=\"{ \n      backgroundImage: `url('https://api.shaolezhuan.cn/lzphoto/indextop.jpg')`, \n      backgroundSize: 'cover', \n      backgroundPosition: 'center', \n      position: 'relative' \n    }\">\n\n      <!-- 状态栏占位 -->\n      <view class=\"statusBar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n        \n      <!-- 顶部导航栏 -->\n      <view \n        class=\"top-bar\" \n        :style=\"{ \n          top: statusBarHeight + 'px', \n          height: titleBarHeight + 'px' \n        }\"\n      >\n        <image class=\"logo\" src=\"https://api.shaolezhuan.cn/lzphoto/logo.jpg\" mode=\"widthFix\" alt=\"应用logo\"></image>\n        <text class=\"app-name\">趣乐转</text>\n      </view>\n\n      <!-- 通知区 -->\n      <view class=\"notice\">\n        <!-- 通知按钮 -->\n        <view class=\"notice-btn\" @click=\"handleNotice\">\n          <view class=\"notice-icon-wrapper\">\n            <uni-icons type=\"notification\" size=\"24\" color=\"#007aff\" class=\"notice-icon\"></uni-icons>\n\t\t\t<text class=\"notice-text\">通知</text>\n          </view>\n          \n          <!-- 滚动通知内容（水平跑马灯） -->\n            <view class=\"center\">\n              <view class=\"marquee\">\n                <navigator url=\"/pages/notice/detail\" class=\"marquee-content\" hover-class=\"notice-link-hover\">\n                  {{ marqueeText }}\n                </navigator>\n              </view>\n            </view>\n          \n          <!-- 右侧箭头 -->\n          <view class=\"right\">\n            <uni-icons type=\"right\" size=\"16\" color=\"#333\"></uni-icons>\n          </view>\n        </view>\n      </view>\n    </view>\n\n\t<!-- 分类区域：加载中显示骨架，加载后显示真实分类 -->\n\t<view class=\"categories-section\">\n\t  <template v-if=\"!isLoading\">\n\t    <view class=\"categories-row\">\n\t\t  <view class=\"category-item\" v-for=\"(item, index) in categoriesTop\" :key=\"index\" @click=\"handleCategoryClick(item.name)\">\n\t\t    <image class=\"category-icon\" :src=\"item.icon\" mode=\"aspectFit\" alt=\"分类图标\"></image>\n\t\t    <text class=\"category-name\">{{ item.name }}</text>\n\t\t  </view>\n\t    </view>\n\t    <view class=\"categories-row\">\n\t\t  <view class=\"category-item\" v-for=\"(item, index) in categoriesBottom\" :key=\"index\" @click=\"handleCategoryClick(item.name)\">\n\t\t    <image class=\"category-icon\" :src=\"item.icon\" mode=\"aspectFit\" alt=\"分类图标\"></image>\n\t\t    <text class=\"category-name\">{{ item.name }}</text>\n\t\t  </view>\n\t    </view>\n\t  </template>\n\t  <view v-else class=\"categories-skeleton\">\n\t    <view class=\"category-skeleton-item\" v-for=\"n in 8\" :key=\"n\">\n\t      <view class=\"skeleton-icon\"></view>\n\t      <view class=\"skeleton-label\"></view>\n\t    </view>\n\t  </view>\n\t</view>\n \n    <!-- 轮播图 -->\n    <view class=\"swiper-wrapper\">\n      <swiper \n        class=\"home-swiper\" \n        indicator-dots \n        indicator-color=\"#ffffff\"\n        indicator-active-color=\"#007aff\"\n        autoplay \n        circular\n        interval=\"3000\"\n      >\n        <swiper-item v-for=\"(slide, index) in swiperList\" :key=\"index\">\n          <image \n            :src=\"slide.imageUrl\" \n            mode=\"widthFix\" \n            class=\"swiper-image\"\n            :alt=\"`轮播图${index + 1}`\"\n            @click=\"handleSlideClick(slide)\"\n          ></image>\n        </swiper-item>\n      </swiper>\n    </view>\n\n    <!-- 推荐板块 -->\n    <view class=\"recommend-content\">\n      <!-- 骨架屏：数据加载时显示 -->\n      <view v-if=\"isLoading\" class=\"skeleton-grid\">\n        <view v-for=\"n in 6\" :key=\"n\" class=\"skeleton-card\">\n          <view \n            class=\"skeleton-image\"\n            :style=\"{ height: (n % 3 === 0 ? '300rpx' : n % 3 === 1 ? '360rpx' : '330rpx') }\"\n          ></view>\n          <view class=\"skeleton-title\"></view>\n          <view class=\"skeleton-price\"></view>\n          <view class=\"skeleton-user\">\n            <view class=\"skeleton-avatar\"></view>\n            <view class=\"skeleton-name\"></view>\n          </view>\n        </view>\n      </view>\n\n      <!-- 瀑布流展示：仅在加载完成且有数据时显示 -->\n      <Waterfall \n        v-else-if=\"filteredRecommendList.length > 0\"\n        :list=\"filteredRecommendList\" \n        :columnCount=\"2\" \n        :gap=\"16\"\n        :borderRadius=\"8\"\n      />\n\n      <!-- 空状态提醒：加载完成但无数据 -->\n      <view v-else class=\"empty-reminder\">\n        暂无推荐商品，敬请期待~\n      </view>\n      \n      <!-- 滚动到底提醒：加载完成后才展示 -->\n      <view v-if=\"!isLoading && hasReachedBottom\" class=\"bottom-reminder\">\n        已经到底啦~ 没有更多推荐商品了\n      </view>\n    </view>\n    \n    <!-- 底部占位 -->\n    <view class=\"statusBar\" :style=\"{ height: statusBarHeight*6 + 'px' }\"></view>\n    \n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, defineProps, defineEmits } from 'vue';\nimport { showToast, sanitizeImageUrl } from '@/utils/uniHelper';\nimport { onLoad, onReachBottom, onShareAppMessage, onShareTimeline, onShow } from '@dcloudio/uni-app';\nimport Waterfall from '@/components/Waterfall-one.vue'; \nimport { \n  getStatusBarHeight, \n  getTitleBarHeight,\n  getNavBarHeight,\n} from '@/utils/system.js';\nimport userApi from '@/api/user.js';\nimport productApi from '@/api/product.js';\nimport noticeApi from '@/api/notice.js';\n\n// 导航相关高度数据\nconst statusBarHeight = ref(0); \nconst titleBarHeight = ref(0); \nconst navBarHeight = ref(0); \n\n//清洗数据\nconst okGoodsList = ref({}); \n\n// 分类数据（含图标路径）\nconst categoriesTop = ref([\n  { name: '电子数码', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/digital.png' },\n  { name: '自行车', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/bicycle.png' },\n  { name: '电器', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/appliance.png' },\n  { name: '体育用品', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/sports.png' }\n]);\n\nconst categoriesBottom = ref([\n  { name: '二手书', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/books.png' },\n  { name: '生活用品', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/life.png' },\n  { name: '虚拟物品', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/virtualgoods.png' },\n  { name: '其他', icon: 'https://api.shaolezhuan.cn/lzphoto/category-icons/others.png' }\n]);\n// 轮播图数据\nconst swiperList = ref([\n  { imageUrl: 'https://api.shaolezhuan.cn/lzphoto/banners/b1.jpg' },\n  { imageUrl: 'https://api.shaolezhuan.cn/lzphoto/banners/b2.jpg' },\n  { imageUrl: 'https://api.shaolezhuan.cn/lzphoto/banners/b3.jpg' },\n  { imageUrl: 'https://api.shaolezhuan.cn/lzphoto/membership/m4.jpg', link: '/pages/promo/promo' }\n]);\n\n// 通知数据\nconst notices = ref([\n  { content: '限时活动：加客服微信免费领会员：qlzkf1 ' },\n]);\n\n// 跑马灯文本：将所有通知拼接为一行\nconst marqueeText = computed(() => notices.value.map(n => n.content).join('    '));\n\n// 原始数据存储\nconst uglyGoodsList = ref([]); // 未清洗的商品数据\nconst uglyDemandList = ref([]); // 未清洗的需求数据\nconst cleanedGoodsList = ref([]); // 清洗后的商品数据\nconst cleanedDemandList = ref([]); // 清洗后的需求数据\nconst allRecommendList = ref([]); // 合并后的所有数据（含商品+需求）\n\n// 是否滚动到底部\nconst hasReachedBottom = ref(false);\n\nconst showNoticeModal = ref(false);\n// 首页加载骨架屏状态\nconst isLoading = ref(true);\n\n\n// 生命周期钩子\nonMounted(() => {\n  statusBarHeight.value = getStatusBarHeight();\n  titleBarHeight.value = getTitleBarHeight();\n  navBarHeight.value = getNavBarHeight();\n  // 高度计算完成，进入页面由 onShow 触发一次数据刷新\n});\n\n// 进入首页页面时刷新推荐数据（每次显示都会执行一次）\nonShow(() => {\n  fetchRecommendData();\n});\n\n// 配置转发到好友的分享内容\nonShareAppMessage(() => ({\n  title: '趣乐转｜校园闲置好物',\n  path: '/pages/index/index',\n  imageUrl: 'https://api.shaolezhuan.cn/lzphoto/logo.jpg'\n}));\n\n// 配置分享到朋友圈的内容\nonShareTimeline(() => ({\n  title: '趣乐转｜发现闲置好物',\n  query: '',\n  imageUrl: 'https://api.shaolezhuan.cn/lzphoto/logo.jpg'\n}));\n\nconst handleNotice = () => {\n  showNoticeModal.value = true; // 点击通知时显示弹窗\n};\n\n// 点击分类跳转\nconst handleCategoryClick = (category) => {\n  showToast(`点击了${category}分类`);\n  uni.navigateTo({ url: `/pages/category/category?type=${category}` });\n};\n\n// 点击轮播图：仅当配置了 link 时进行跳转\nconst handleSlideClick = (slide) => {\n  if (slide && slide.link) {\n    uni.navigateTo({ url: slide.link });\n  }\n};\n\n// 监听页面滚动到底部\nonReachBottom(() => {\n  hasReachedBottom.value = true;\n  // 5秒后自动隐藏底部提示\n  setTimeout(() => {\n    hasReachedBottom.value = false;\n  }, 5000);\n});\n\n// 接收父组件的显示控制\nconst props = defineProps({\n  visible: {\n    type: Boolean,\n    default: false\n  }\n})\n\n// 向父组件发射事件\nconst emit = defineEmits(['close', 'goTo'])\n\n// 关闭弹窗\nconst close = () => {\n showNoticeModal.value = false;\n}\n\n// 前往操作\nconst goTo = () => {\n  showNoticeModal.value = false;\n  // 使用绝对路径，避免在 H5/小程序相对路径解析异常\n  uni.navigateTo({ url: '/pages/promo/promo' });\n}\n\n// 1. 请求推荐数据（商品+需求）\nconst fetchRecommendData = async () => {\n  try {\n    isLoading.value = true; // 开始加载，显示骨架屏\n    // 并行请求商品和需求数据\n    const [goodsRes, demandRes] = await Promise.all([\n      productApi.getAllGoods(), // 假设该接口获取所有商品\n      productApi.getAllDemands() // 假设该接口获取所有需求\n    ]);\n\t\n\tconsole.log('接口获取的所有商品数据',goodsRes)\n\tconsole.log('接口获取的所有需求数据',demandRes)\n    \n    // 处理商品数据\n    if (goodsRes.code === 200) {\n      uglyGoodsList.value = goodsRes.data || [];\n\t  await cleanGoodsList();\n\t  console.log('脏的商品数据：',uglyGoodsList.value)\n    } else {\n      showToast('获取商品数据失败');\n    }\n    \n    // 处理需求数据\n    if (demandRes.code === 200) {\n      uglyDemandList.value = demandRes.data|| [];\n      await cleanDemandList(); // 清洗需求数据\n\t  console.log('脏的需求数据：',uglyDemandList.value)\n    } else {\n      showToast('获取需求数据失败');\n    }\n    \n\tmergeAllLists();\n  } catch (error) {\n    console.error('获取推荐数据失败：', error);\n    showToast('网络异常，获取推荐数据失败');\n  } finally {\n    isLoading.value = false; // 加载结束，隐藏骨架屏\n  }\n};\n\n// 2. 清洗商品数据\nconst cleanGoodsList = async () => {\n  const tempGoodsList = await Promise.all(\n    uglyGoodsList.value.map(async (item) => {\n      // 处理标签\n      let tags = [];\n      try {\n        const attributesObj = JSON.parse(item.attributes || '{}');\n        tags = Object.values(attributesObj);\n        tags.unshift(item.isNegotiable ? '可刀' : '不可刀');\n      } catch (err) {\n        console.error('解析商品属性失败:', err);\n        tags = [];\n      }\n      \n      // 获取用户信息\n      const user = await getUserInfoByUserId(item.sellerId);\n      \n      return {\n        id: item.id,\n        // 兼容后端可能返回 imgUrl 或 mainImageUrl 两种命名\n        imgUrl: sanitizeImageUrl(item.mainImageUrl || item.imgUrl, 'product'),\n        tags,\n        title: item.title || '未知商品',\n        desc: item.description || '',\n        categoryName: item.categoryName || '其他',\n        user: user || { avatar: 'https://api.shaolezhuan.cn/lzphoto/avatars/avatar1.jpeg', nickname: '未知用户' },\n        type: 'product',\n        price: item.price || 0,\n        isRecommended: item.isHomepageFeatured , // 是否推荐（核心字段）\n        recommendPriority: item.adminPinScore || 0 // 推荐权重（核心字段）\n      };\n    })\n  );\n  console.log('未筛选推荐的商品数据：',tempGoodsList)\n  // 筛选出推荐的商品\n  cleanedGoodsList.value = tempGoodsList.filter(item => item.isRecommended);\n  console.log('干净的商品数据：',cleanedGoodsList.value)\n};\n\n// 3. 清洗需求数据\nconst cleanDemandList = async () => {\n  const tempDemandList = await Promise.all(\n    uglyDemandList.value.map(async (item) => {\n      // 处理标签\n      let tags = [];\n      try {\n        const attributesObj = JSON.parse(item.attributes || '{}');\n        tags = Object.values(attributesObj);\n      } catch (err) {\n        console.error('解析需求属性失败:', err);\n        tags = [];\n      }\n\t  \n      return {\n        id: item.id,\n        // 兼容后端可能返回 imgUrl 或 mainImageUrl 两种命名\n        imgUrl: sanitizeImageUrl(item.mainImageUrl || item.imgUrl, 'demand'),\n        tags: ['需求', ...tags],\n        title: item.title || '未知需求',\n        desc: item.description || '',\n        categoryName: item.categoryName || '其他',\n        user: item.requester\n          ? { avatar: sanitizeImageUrl(item.requester.avatar, 'avatar'), nickname: item.requester.nickname || '未知用户' }\n          : { avatar: 'https://api.shaolezhuan.cn/lzphoto/avatars/avatar1.jpeg', nickname: '未知用户' },\n        type: 'demand',\n        price: item.budget || 0,\n        isRecommended: item.isHomepageFeatured || true, // 是否推荐（核心字段）\n        recommendPriority: item.adminPinScore || 0 // 推荐权重（核心字段）\n      };\n    })\n  );\n  \n  // 筛选出推荐的需求\n  cleanedDemandList.value = tempDemandList.filter(item => item.isRecommended);\n  console.log('干净的需求数据：',cleanedDemandList.value)\n};\n\n//随机混合函数（把两种干净数据打乱）\nfunction shuffleMergeLists(list1, list2) {\n  // 先合并两个列表\n  const merged = [...list1, ...list2];\n  \n  // 随机打乱顺序（Fisher-Yates 洗牌算法）\n  for (let i = merged.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [merged[i], merged[j]] = [merged[j], merged[i]]; // 交换元素\n  }\n  \n  return merged;\n}\n\nconst mergeAllLists = () => {\n  const mixedList = shuffleMergeLists(cleanedGoodsList.value, cleanedDemandList.value);\n  allRecommendList.value = mixedList; // 此时赋值给外部的响应式变量\n  // 移除权重排序，保持随机顺序，避免序列号靠前的长期在前\n  console.log('混合后的最终列表：', allRecommendList.value);\n};\n\n// 5. 计算属性：仅展示推荐的商品/需求（这里主要用于空状态判断，实际已在清洗时筛选）\nconst filteredRecommendList = computed(() => {\n  // 双重保险：再次筛选推荐商品，避免遗漏\n  return allRecommendList.value.filter(item => item.isRecommended);\n});\n\n// 辅助函数：获取用户信息\nconst getUserInfoByUserId = async (userId) => {\n  try {\n    const res = await userApi.getUserInfo(userId);\n    if (res.code === 200) {\n      return {\n        avatar: sanitizeImageUrl(res.data.avatar, 'avatar'),\n        nickname: res.data.nickname || '未知用户'\n      };\n    }\n    return null;\n  } catch (err) {\n    console.error('获取用户信息失败:', err);\n    return null;\n  }\n};\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n.statusBar {\n  width: 100%;\n  z-index: 99;\n}\n\n/* 顶部导航栏 */\n.top-bar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  z-index: 10;\n  align-items: center;\n  padding: 0 20rpx;\n  background-color: transparent; \n}\n\n.logo {\n  width: 60rpx;\n  height: 60rpx;\n  margin-right: 15rpx;\n  border-radius: 50%;\n}\n\n.picBar{\n  height: 70px;\n  background-color: pink;\n}\n\n.notice {\n  margin-top: 350rpx;\n  margin-bottom: 20rpx;\n}\n\n.notice-btn {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  background-color: transparent; \n  border-radius: 16rpx;\n  padding: 20rpx 24rpx;\n  box-shadow: 0 0 10rpx rgba(0, 0, 0, 0.05);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.notice-icon-wrapper {\n  display: flex;\n  align-items: center;\n  min-width: 120rpx;\n}\n\n.notice-text {\n  color: #007aff;\n  font-size: 28rpx;\n  margin-left: 8rpx;\n}\n\n.center {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n  height: 40rpx;\n}\n\n.notice-swiper {\n  height: 100%;\n}\n\n.notice-link {\n  color: #333333;\n  font-size: 26rpx;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: block;\n  height: 100%;\n  line-height: 40rpx;\n}\n\n.notice-link-hover {\n  background-color: rgba(0, 0, 0, 0.02);\n}\n\n.right {\n  margin-left: 16rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40rpx;\n}\n\n.app-name {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333333;\n  flex: 1;\n}\n\n.more-btn {\n  font-size: 28rpx;\n  color: #666666;\n  margin-right: 20rpx;\n}\n\n.notice-btn {\n  display: flex;\n  margin: 20rpx 30rpx;\n  padding: 20rpx;\n  margin-top: 15rpx;\n  background-color: #e8f3ff;\n  border-radius: 10rpx;\n  text-align: center;\n  color: #007aff;\n  font-size: 28rpx;\n  border-radius: 10rpx;\n  gap: 10rpx;\n}\n\n/* 跑马灯样式 */\n.marquee {\n  width: 100%;\n  overflow: hidden;\n}\n\n.marquee-content {\n  display: inline-block;\n  white-space: nowrap;\n  padding-left: 100%;\n  animation: marquee 16s linear infinite;\n  color: #333333;\n  font-size: 26rpx;\n  line-height: 40rpx;\n}\n\n@keyframes marquee {\n  0% { transform: translateX(0); }\n  100% { transform: translateX(-100%); }\n}\n\n/* 分类区域 */\n.categories-section {\n  padding: 20rpx 30rpx;\n  background-color: #ffffff;\n  margin-bottom: 10rpx;\n}\n\n.categories-row {\n  display: flex;\n  justify-content: space-around;\n  margin-bottom: 30rpx;\n}\n\n.categories-row:last-child {\n  margin-bottom: 0;\n}\n\n.category-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 120rpx;\n}\n\n.category-icon {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 10%; /* 保持圆形风格，可根据需求调整 */\n  margin-bottom: 10rpx;\n}\n\n.category-name {\n  font-size: 26rpx;\n  color: #333333;\n}\n\n/* 分类骨架屏 */\n.categories-skeleton {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.category-skeleton-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 120rpx;\n  margin-bottom: 30rpx;\n}\n\n.skeleton-icon {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 10%;\n  background: linear-gradient(90deg, #eee 25%, #f5f5f5 37%, #eee 63%);\n  background-size: 400% 100%;\n  animation: skeleton-shimmer 1.4s ease infinite;\n}\n\n.skeleton-label {\n  width: 72rpx;\n  height: 26rpx;\n  margin-top: 10rpx;\n  border-radius: 6rpx;\n  background: linear-gradient(90deg, #eee 25%, #f5f5f5 37%, #eee 63%);\n  background-size: 400% 100%;\n  animation: skeleton-shimmer 1.4s ease infinite;\n}\n\n/* 轮播图 */\n.swiper-wrapper {\n  padding: 0 30rpx;\n  margin-bottom: 20rpx;\n  box-shadow: 1rpx 2rpx 3rpx rgba(0, 0, 0, 0.05);\n}\n\n.home-swiper {\n  width: 100%;\n  height: 300rpx;\n  border-radius: 15rpx;\n  overflow: hidden;\n}\n\n.swiper-image {\n  width: 100%;\n  height: 100%;\n}\n\n.arrow-icon {\n  width: 30rpx;\n  height: 30rpx;\n}\n\n.recommend-more {\n  font-size: 26rpx;\n  color: #007aff;\n}\n\n/* 推荐内容 */\n.recommend-content {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n}\n\n/* 骨架屏样式 */\n.skeleton-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16rpx;\n  padding: 0 16rpx 16rpx 16rpx;\n}\n\n.skeleton-card {\n  background-color: #ffffff;\n  border-radius: 10rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 6rpx rgba(0,0,0,0.04);\n}\n\n.skeleton-image,\n.skeleton-title,\n.skeleton-price,\n.skeleton-avatar,\n.skeleton-name {\n  background: linear-gradient(90deg, #eee 25%, #f5f5f5 37%, #eee 63%);\n  background-size: 400% 100%;\n  animation: skeleton-shimmer 1.4s ease infinite;\n}\n\n.skeleton-image {\n  width: 100%;\n}\n\n.skeleton-title {\n  height: 30rpx;\n  margin: 20rpx 20rpx 12rpx 20rpx;\n  border-radius: 8rpx;\n}\n\n.skeleton-price {\n  height: 26rpx;\n  margin: 0 20rpx 16rpx 20rpx;\n  width: 40%;\n  border-radius: 8rpx;\n}\n\n.skeleton-user {\n  display: flex;\n  align-items: center;\n  padding: 0 20rpx 20rpx 20rpx;\n  gap: 12rpx;\n}\n\n.skeleton-avatar {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n}\n\n.skeleton-name {\n  flex: 1;\n  height: 24rpx;\n  border-radius: 8rpx;\n}\n\n@keyframes skeleton-shimmer {\n  0% { background-position: 0% 0; }\n  100% { background-position: 100% 0; }\n}\n\n/* 空状态提醒样式 */\n.empty-reminder {\n  text-align: center;\n  padding: 100rpx 20rpx;\n  color: #999;\n  font-size: 28rpx;\n  background-color: #fff;\n  margin: 20rpx 16rpx;\n  border-radius: 10rpx;\n}\n\n/* 滚动到底提醒样式 */\n.bottom-reminder {\n  text-align: center;\n  padding: 20rpx;\n  color: #666;\n  font-size: 26rpx;\n  background-color: #f0f0f0;\n  margin: 16rpx;\n  border-radius: 8rpx;\n  animation: fadeIn 0.5s;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n/* 未读数量标记 */\n.unread-badge {\n  position: absolute;\n  top: -8rpx;\n  right: -8rpx;\n  width: 30rpx;\n  height: 30rpx;\n  border-radius: 50%;\n  background-color: #ff4d4f;\n  color: #fff;\n  font-size: 20rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* 调整通知图标容器的定位，使未读标记显示正常 */\n.notice-icon-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n  min-width: 120rpx;\n}\n\n.modal-mask {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n}\n\n.modal-container {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  max-width: 500rpx;\n  background: #fff;\n  border-radius: 12rpx;\n  padding: 30rpx;\n  z-index: 1000;\n}\n\n.modal-title {\n  font-size: 36rpx;\n  font-weight: bold;\n  text-align: center;\n  margin-bottom: 20rpx;\n}\n\n.modal-content {\n  font-size: 28rpx;\n  color: #666;\n  line-height: 1.6;\n  margin-bottom: 30rpx;\n  text-align: center;\n}\n\n.modal-buttons {\n  display: flex;\n  justify-content: space-around;\n}\n\n.modal-btn {\n  width: 45%;\n  height: 80rpx;\n  line-height: 80rpx;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n}\n\n.modal-btn-primary {\n  background: #ff6b6b;\n  color: #fff;\n}\n</style>","import MiniProgramPage from 'C:/Users/86133/Desktop/demo/Lezhuan/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onMounted","getStatusBarHeight","getTitleBarHeight","getNavBarHeight","onShow","onShareAppMessage","onShareTimeline","showToast","uni","onReachBottom","productApi","sanitizeImageUrl","userApi"],"mappings":"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"}