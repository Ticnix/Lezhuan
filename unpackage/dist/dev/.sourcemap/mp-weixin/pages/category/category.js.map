{"version":3,"file":"category.js","sources":["pages/category/category.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<template>\n  <view class=\"category-page\">\n    <!-- 背景容器 -->\n    <view\n      class=\"background-container\"\n      :style=\"{\n        backgroundImage: `url('/static/bg.jpg')`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        width: '100%',\n        zIndex: 1\n      }\"\n    >\n      <!-- 状态栏占位 -->\n      <view class=\"statusBar\"></view>\n\n      <!-- 搜索和筛选区域 -->\n      <view class=\"search-filter-wrapper\">\n        <!-- 搜索区域 -->\n        <view class=\"search-section\">\n          <view class=\"search-box\">\n            <uni-icons type=\"search\" size=\"24\" color=\"#999\"></uni-icons>\n            <input\n              v-model=\"searchValue\"\n              class=\"search-input\"\n              placeholder=\"搜索任何商品...\"\n              @confirm=\"handleSearch\"\n            />\n          </view>\n        </view>\n\n        <!-- 筛选区域 -->\n        <view class=\"filter-section\">\n          <!-- 功能筛选 -->\n          <view class=\"filter-item\">\n            <text class=\"filter-label\">功能:</text>\n            <picker\n              mode=\"selector\"\n              :range=\"functionRange\"\n              :value=\"functionIndex\"\n              @change=\"handleFunctionChange\"\n              class=\"custom-picker\"\n            >\n              <view class=\"picker-display\">\n                {{ functionRange[functionIndex] }}\n                <uni-icons type=\"down\" size=\"18\" color=\"#999\" class=\"picker-icon\"></uni-icons>\n              </view>\n            </picker>\n          </view>\n\n          <!-- 类型筛选 -->\n          <view class=\"filter-item\">\n            <text class=\"filter-label\">分类:</text>\n            <picker\n              mode=\"selector\"\n              :range=\"categoryOptions\"\n              :value=\"categoryIndex\"\n              @change=\"handleCategoryChange\"\n              class=\"custom-picker\"\n            >\n              <view class=\"picker-display\">\n                {{ categoryOptions[categoryIndex] || '全部' }}\n                <uni-icons type=\"down\" size=\"18\" color=\"#999\" class=\"picker-icon\"></uni-icons>\n              </view>\n            </picker>\n          </view>\n\n          <!-- 价格筛选 -->\n          <view class=\"filter-item\">\n            <text class=\"filter-label\">价格:</text>\n            <picker\n              mode=\"selector\"\n              :range=\"priceOptions\"\n              :value=\"priceIndex\"\n              @change=\"handlePriceChange\"\n              class=\"custom-picker\"\n            >\n              <view class=\"picker-display\">\n                {{ priceOptions[priceIndex] || '全部' }}\n                <uni-icons type=\"down\" size=\"18\" color=\"#999\" class=\"picker-icon\"></uni-icons>\n              </view>\n            </picker>\n          </view>\n        </view>\n      </view>\n    </view>\n\n\n    <!-- 初次加载骨架屏：首屏商品/需求任一列表在加载中时显示 -->\n    <view v-if=\"isInitialLoading\" class=\"skeleton-grid\">\n      <view v-for=\"n in 6\" :key=\"n\" class=\"skeleton-card\">\n        <view \n          class=\"skeleton-image\"\n          :style=\"{ height: (n % 3 === 0 ? '300rpx' : n % 3 === 1 ? '360rpx' : '330rpx') }\"\n        ></view>\n        <view class=\"skeleton-title\"></view>\n        <view class=\"skeleton-price\"></view>\n        <view class=\"skeleton-user\">\n          <view class=\"skeleton-avatar\"></view>\n          <view class=\"skeleton-name\"></view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 空状态提醒：加载完成但无数据时显示 -->\n    <view v-else-if=\"filteredGoods.length === 0\" class=\"empty-reminder\">\n      暂无符合条件的商品，换个筛选条件试试吧~\n    </view>\n\n\t<!-- 瀑布流商品展示 -->\n\t<view v-else>\n\t  <scroll-view\n\t\tclass=\"scroll-container\"\n\t\tref=\"scrollRef\"\n\t\tscroll-y\n\t\t@scroll=\"onScroll\"\n\t\t:style=\"{ height: `calc(100vh - ${statusBarHeight + 300}rpx)` }\"\n\t  >\n\t\t<Waterfall\n\t\t  :list=\"filteredGoods\"\n\t\t  :columnCount=\"2\"\n\t\t  :gap=\"20\"\n\t\t  :virtual-scroll=\"true\"\n\t\t  :visible-height=\"800\"\n\t\t/>\n\t\t<!-- 加载更多骨架：在分页加载更多时显示 -->\n\t\t<view v-if=\"isLoadingMore\" class=\"loading-skeleton\">\n\t\t  <view class=\"skeleton-card\">\n\t\t    <view class=\"skeleton-image\" style=\"height: 320rpx;\"></view>\n\t\t    <view class=\"skeleton-title\"></view>\n\t\t    <view class=\"skeleton-price\"></view>\n\t\t    <view class=\"skeleton-user\">\n\t\t      <view class=\"skeleton-avatar\"></view>\n\t\t      <view class=\"skeleton-name\"></view>\n\t\t    </view>\n\t\t  </view>\n\t\t  <view class=\"skeleton-card\">\n\t\t    <view class=\"skeleton-image\" style=\"height: 340rpx;\"></view>\n\t\t    <view class=\"skeleton-title\"></view>\n\t\t    <view class=\"skeleton-price\"></view>\n\t\t    <view class=\"skeleton-user\">\n\t\t      <view class=\"skeleton-avatar\"></view>\n\t\t      <view class=\"skeleton-name\"></view>\n\t\t    </view>\n\t\t  </view>\n\t\t</view>\n\t  </scroll-view>\n\n\t  <!-- 真正拉到底的提醒 -->\n\t  <view v-if=\"!hasMoreGoods.value && !hasMoreDemand.value\" class=\"bottom-reminder\">\n\t\t已经到底啦~ 没有更多商品了\n\t  </view>\n</view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, nextTick } from 'vue';\nimport { onLoad, onReachBottom } from '@dcloudio/uni-app';\nimport Waterfall from '@/components/Waterfall.vue';\nimport userApi from '@/api/user.js';\nimport productApi from '@/api/product.js';\nimport { sanitizeImageUrl } from '@/utils/uniHelper';\n\nconst userId = ref('');\nconst searchValue = ref('');\nconst functionRange = ref(['全部', '宝贝', '需求']); // 功能筛选范围\nconst functionIndex = ref(0); // 功能选中索引\nconst categoryOptions = ref([]); // 品类筛选选项\nconst categoryIndex = ref(0); // 品类选中索引\nconst currentType = ref(''); // 当前品类类型\nconst priceOptions = ref(['全部', '0-50元', '50-100元', '100-300元', '300-500元', '500元以上']); // 价格筛选范围\nconst priceIndex = ref(0); // 价格选中索引\nconst hasReachedBottom = ref(false); // 是否滚动到底部\nconst uglyGoodsList = ref([]);//直接在后端获取的没有清洗过的数据\nconst goodsList = ref([]);// 商品列表数据（已经清洗过的干净数据）\nconst uglyDemandList = ref([]);//没有清洗过的需求数据\n//需求列表的请求体数据\nconst categoryId = ref(null); // 分类ID筛选\nconst status = ref(''); // 需求状态筛选\n//清洗\nconst cleanedGoodsList = ref([]);\nconst cleanedDemandList = ref([]);\n// 商品分页参数（独立）\nconst goodsPageNum = ref(1);\nconst goodsPageSize = ref(4);\nconst isLoadingGoods = ref(false);\nconst hasMoreGoods = ref(true);\n\n// 需求分页参数（独立）\nconst demandPageNum = ref(1);\nconst demandPageSize = ref(4);\nconst isLoadingDemand = ref(false);\nconst hasMoreDemand = ref(true);\n\n// 分层数据存储\nconst displayList = ref([]); // 最终展示数组（固定，仅增量拼接）\nconst goodsPageData = ref([]); // 商品已请求的所有分页数据（[[第1页], [第2页], ...]）\nconst demandPageData = ref([]); // 需求已请求的所有分页数据（[[第1页], [第2页], ...]）\n\n// 预加载触发阈值（距离底部300rpx时触发）\nconst preloadThreshold = ref(300);\nconst scrollRef = ref(null); // 定义ref\n\n// 价格区间映射\nconst priceRanges = {\n  '0-50元': { min: 0, max: 50 },\n  '50-100元': { min: 50, max: 100 },\n  '100-300元': { min: 100, max: 300 },\n  '300-500元': { min: 300, max: 500 },\n  '500元以上': { min: 500, max: Infinity }\n};\n\n// 品类映射表（统一名称：虚拟物品；顺序不影响映射）\nconst categoryMap = {\n  '电子数码': [ '电脑外设', '耳机音响', '手机平板', '智能设备', '其他'],\n  '自行车': [ '普通自行车', '山地车', '公路自行车', '电动自行车', '其他'],\n  '电器': ['吹风机', '干衣袋', '电灯风扇', '小厨具', '其他'],\n  '体育用品': [ '各种球类', '各种球拍', '健身器材', '运动装备', '其他'],\n  '二手书': ['大一教材', '大二教材', '大三教材', '小说漫画', '其他'],\n  '生活用品': ['美容/护肤品', '服饰服装', '衣架/收纳', '椅子抱枕', '其他'],\n  '虚拟物品': ['游戏账号', '陪玩代打', '数字会员', '线上课程', '其他'],\n  '其他': ['学习用品', '手工制品', '宠物用品', '办公用品', '其他']\n};\n\n//动态获取状态栏高度（适配不同设备）\nconst statusBarHeight = ref(0);\nconst statusBarHeightRpx = ref(0);\nonLoad((options) => {\n  // 获取系统状态栏高度\n  uni.getSystemInfo({\n    success: (res) => {\n      // 公式：px 值 * 750 / 屏幕宽度\n      statusBarHeight.value = res.statusBarHeight * 750 / res.windowWidth;\n    }\n  });\n  // 从路由参数获取当前品类类型\n  if (options.type) {\n    currentType.value = options.type;//当前品类类型\n    generateCategoryOptions();\n  }\n});\n\n// 分类名称 → 数据库ID 映射（与后台一致）\nconst categoryIdMap = {\n  '电子数码': 1,\n  '其他': 2,\n  '生活用品': 3,\n  '虚拟物品': 4,\n  '自行车': 5,\n  '体育用品': 6,\n  '电器': 7,\n  '二手书': 8\n};\n\n//获取商品/需求请求使用的分类ID\nconst getCategoryIdByType = () => {\n  const id = categoryIdMap[currentType.value];\n  return typeof id === 'number' ? id : -1;\n};\n\nonMounted(async () => {\n  if (currentType.value) {\n    fetchGoodsList(getCategoryIdByType(), false);\n    fetchDemandList(false);\n  }\n  await nextTick(); // 确保 DOM 渲染完成\n    // 验证 scroll-view 是否正确绑定\n    if (scrollRef.value) {\n      console.log('scroll-view 绑定成功');\n\t  console.log('scroll-view已渲染，元素：', scrollRef.value);\n\t  // 手动获取clientHeight（用于验证）\n\t  const query = uni.createSelectorQuery().in(scrollRef.value);\n\t  query.boundingClientRect((res) => {\n\t\tconsole.log('scroll-view实际高度：', res?.height); // 若有值，说明渲染正常\n\t  }).exec();\n    } else {\n      console.error('scroll-view ref 绑定失败，请检查拼写');\n    }\n\tgetClientHeight();\n});\n\nconst getClientHeight = () => {\n  // 延迟 300ms，确保动态高度渲染完成\n  setTimeout(() => {\n    uni.createSelectorQuery()\n      .select('.scroll-container')\n      .boundingClientRect(data => {\n        if (data) {\n          console.log('scroll-container clientHeight：', data.clientHeight);\n        } else {\n          console.error('未找到 .scroll-container 元素');\n        }\n      })\n      .exec();\n  }, 300);\n};\n\nwatch([functionIndex, categoryIndex, priceIndex], () => {\n  hasReachedBottom.value = false;\n});\n\n// 生成品类选项\nconst generateCategoryOptions = () => {\n  // 从 categoryMap 中获取当前类型的子分类，作为筛选选项\n  categoryOptions.value = ['全部', ...(categoryMap[currentType.value] || [])];\n  categoryIndex.value = 0;\n};\n\n// 功能筛选变化回调\nconst handleFunctionChange = (e) => {\n  functionIndex.value = e.detail.value;\n  resetAndReload(); // 重置并重新加载\n};\n\n// 品类筛选变化回调\nconst handleCategoryChange = (e) => {\n  categoryIndex.value = e.detail.value;\n  resetAndReload();\n};\n\n// 价格筛选变化回调\nconst handlePriceChange = (e) => {\n  priceIndex.value = e.detail.value;\n  resetAndReload();\n};\n\n// 搜索回调\nconst handleSearch = () => {\n  resetAndReload();\n};\n\n// 重置分页状态并重新加载第1页\nconst resetAndReload = () => {\n  // 重置商品分页\n  goodsPageNum.value = 1;\n  goodsPageData.value = [];\n  hasMoreGoods.value = true;\n  // 重置需求分页\n  demandPageNum.value = 1;\n  demandPageData.value = [];\n  hasMoreDemand.value = true;\n  // 清空展示数组\n  displayList.value = [];\n  \n  fetchGoodsList(getCategoryIdByType(), false);\n  fetchDemandList(false);\n};\n\n// 监听滚动事件，实现预加载\nconst onScroll = (e) => {\n  const clientHeight = 760;//这里直接写死了\n  const { scrollTop, scrollHeight} = e.detail;\n  const distanceToBottom = scrollHeight - scrollTop - clientHeight;\n // console.log('距离底部：', distanceToBottom);\n  \n  //打印关键参数，确认滚动状态\n  // console.log(\n  //   '滚动参数：',\n  //   'scrollTop:', scrollTop,\n  //   'scrollHeight内容总高度:', scrollHeight,\n  //   'clientHeight:', clientHeight,\n  //   'distanceToBottom:', distanceToBottom\n  // );\n \n  // 调整触发条件：距离底部 < 阈值，且至少有一个列表还有更多数据\n  if (\n    distanceToBottom < preloadThreshold.value &&\n    !isLoadingGoods.value &&\n    !isLoadingDemand.value &&\n    (hasMoreGoods.value || hasMoreDemand.value)\n  ) {\n    console.log('触发预加载');\n    if (hasMoreGoods.value && !isLoadingGoods.value) {\n      goodsPageNum.value += 1;\n      fetchGoodsList(getCategoryIdByType(), true);\n    }\n    if (hasMoreDemand.value && !isLoadingDemand.value) {\n      demandPageNum.value += 1;\n      fetchDemandList(true);\n    }\n  }\n};\n\n// 封装请求商品列表的函数\nconst fetchGoodsList = async (categoryId, isLoadMore = false) => {\n  if (isLoadingGoods.value || !hasMoreGoods.value) return;\n  isLoadingGoods.value = true;\n\n  try {\n    const params = {\n      categoryId,\n      current: isLoadMore ? goodsPageNum.value : 1,\n      size: goodsPageSize.value\n    };\n    console.log('商品列表请求参数：', params);\n    const res = await productApi.getCategorie(params);\n    \n    if (res.code === 200) {\n      const newPage = res.data.records || [];\n      if (newPage.length === 0) {\n        hasMoreGoods.value = false;\n        return;\n      }\n\n      // 1. 存储原始分页数据（用于重置和复用）\n      if (isLoadMore) {\n        goodsPageData.value.push(newPage); // 加载更多：追加分页\n      } else {\n        goodsPageData.value = [newPage]; // 重新加载：重置为第1页\n        goodsPageNum.value = 1;\n      }\n\n      // 2. 清洗新分页商品数据（复用已定义的 cleanGoodsSinglePage）\n      const cleanedNewPage = await cleanGoodsSinglePage(newPage);\n\n      // 3. 增量拼接：打乱新商品数据，拼到展示数组\n      if (isLoadMore) {\n        displayList.value = [...displayList.value, ...shuffleSingleList(cleanedNewPage)];\n      } else {\n        // 重新加载时，先放商品数据，再合并已有需求数据\n        displayList.value = shuffleSingleList(cleanedNewPage);\n        // 若需求已加载第1页，一起拼接（保证初始页面同时有商品和需求）\n        if (demandPageData.value.length > 0) {\n          const demandFirstPage = demandPageData.value[0];\n          const cleanedDemandFirstPage = await cleanDemandSinglePage(demandFirstPage);\n          displayList.value = [...displayList.value, ...shuffleSingleList(cleanedDemandFirstPage)];\n        }\n      }\n\n      // 4. 判断是否还有更多商品\n\t  hasMoreGoods.value = newPage.length === goodsPageSize.value; \n    } else {\n      uni.showToast({ title: res.message || '获取商品列表失败', icon: 'none' });\n      hasMoreGoods.value = false;\n    }\n  } catch (error) {\n    console.error('商品请求异常：', error);\n    uni.showToast({ title: '网络异常', icon: 'none' });\n    hasMoreGoods.value = false;\n  } finally {\n    isLoadingGoods.value = false;\n  }\n};\n\n// 封装请求需求列表的函数\nconst fetchDemandList = async (isLoadMore = false) => {\n  if (isLoadingDemand.value || !hasMoreDemand.value) return;\n  isLoadingDemand.value = true;\n\n  try {\n    const params = {\n      categoryId: getCategoryIdByType(),\n      status: 'active',\n      current: isLoadMore ? demandPageNum.value : 1,\n      size: demandPageSize.value\n    };\n\tconsole.log('需求列表请求参数：', params);\n    const res = await productApi.getDemandList(params);\n    \n    if (res.code === 200) {\n      const newPage = res.data.records || [];\n      if (newPage.length === 0) {\n        hasMoreDemand.value = false;\n        return;\n      }\n\n      // 1. 存储原始分页数据\n      if (isLoadMore) {\n        demandPageData.value.push(newPage);\n      } else {\n        demandPageData.value = [newPage];\n        demandPageNum.value = 1;\n      }\n\n      // 2. 清洗新分页数据\n      const cleanedNewPage = await cleanDemandSinglePage(newPage);\n\n      // 3. 增量拼接\n      if (isLoadMore) {\n        displayList.value = [...displayList.value, ...shuffleSingleList(cleanedNewPage)];\n      } else {\n        displayList.value = shuffleSingleList(cleanedNewPage);\n        // 若商品已有第1页，一起拼接\n        if (goodsPageData.value.length > 0) {\n          const goodsFirstPage = goodsPageData.value[0];\n          const cleanedGoodsFirstPage = await cleanGoodsSinglePage(goodsFirstPage);\n          displayList.value = [...displayList.value, ...shuffleSingleList(cleanedGoodsFirstPage)];\n        }\n      }\n\n      // hasMoreDemand.value = newPage.length >= demandPageSize.value;\n\t  hasMoreDemand.value = newPage.length === demandPageSize.value;\n    } else {\n      uni.showToast({ title: res.message || '获取需求列表失败', icon: 'none' });\n      hasMoreDemand.value = false;\n    }\n  } catch (error) {\n    console.error('需求请求异常：', error);\n    uni.showToast({ title: '网络异常', icon: 'none' });\n    hasMoreDemand.value = false;\n  } finally {\n    isLoadingDemand.value = false;\n  }\n};\n\n// 单独清洗商品单个分页（复用逻辑）\nconst cleanGoodsSinglePage = async (pageData) => {\n  const cleaned = await Promise.all(\n    pageData.map(item => {\n      let tags = [];\n      let category = '其他';\n      try {\n        const attributesObj = JSON.parse(item.attributes || '{}');\n        category = attributesObj.subcategory || attributesObj.category || '其他';\n        tags = [\n          item.isNegotiable ? '可刀' : '不可刀',\n          attributesObj.category || '其他',\n          attributesObj.subcategory || '其他',\n          attributesObj.condition || '未知成色'\n        ].filter(Boolean);\n      } catch (err) {\n        tags = [];\n      }\n      return {\n        id: item.id,\n        imgUrl: sanitizeImageUrl(item.mainImageUrl, 'product'),\n        tags,\n        title: item.title || '未知商品',\n        desc: item.description || '',\n        categoryName: item.categoryName,\n        user:  { avatar: sanitizeImageUrl(item.sellerAvatarUrl, 'avatar'), nickname: item.sellerNickname }  || { avatar: 'https://api.shaolezhuan.cn/lzphoto/avatars/avatar1.jpeg', nickname: '未知用户' },\n        category: category,\n        type: 'product',\n        price: item.price || 0,\n        status: item.status,\n        adminPinScore: (Number(item.urgentPush) === 1 || item.urgentPush === true) ? 1 : 0,\n        sortPriority: (Number(item.urgentPush) === 1 || item.urgentPush === true) ? 1 : 0,\n        isAdminPinned: (Number(item.urgentPush) === 1 || item.urgentPush === true)\n      };\n    })\n  );\n  return cleaned.filter(item => item.status === 'active');\n};\n\n// 单独清洗需求单个分页（复用逻辑）\nconst cleanDemandSinglePage = async (pageData) => {\n  const cleaned = await Promise.all(\n    pageData.map(item => {\n      return {\n        id: item.id,\n        imgUrl: sanitizeImageUrl(item.mainImageUrl, 'demand'),\n        tags: ['需求'],\n        title: item.title || '未知需求',\n        desc: item.description || '',\n        categoryName: currentType.value,\n\t\tuser: item.requester || { avatar: 'https://api.shaolezhuan.cn/lzphoto/avatars/avatar1.jpeg', nickname: '未知用户' },\n        // user:  { avatar: sanitizeImageUrl(item.sellerAvatarUrl, 'avatar'), nickname: item.sellerNickname }  || { avatar: 'https://api.shaolezhuan.cn/lzphoto/avatars/avatar1.jpeg', nickname: '未知用户' },\n        category: currentType.value || '其他',\n        type: 'demand',\n        price: item.budget || 0,\n        status: item.status,\n        adminPinScore: (Number(item.urgentPush) === 1 || item.urgentPush === true) ? 1 : 0,\n        sortPriority: (Number(item.urgentPush) === 1 || item.urgentPush === true) ? 1 : 0,\n        isAdminPinned: (Number(item.urgentPush) === 1 || item.urgentPush === true)\n      };\n    })\n  );\n  return cleaned.filter(item => item.status === 'active');\n};\n\n// 单独打乱单个列表（仅打乱新数据）\nconst shuffleSingleList = (list) => {\n  const newList = [...list];\n  for (let i = newList.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newList[i], newList[j]] = [newList[j], newList[i]];\n  }\n  return newList;\n};\n\n// 清洗商品数据时缓存attributes解析结果\nconst attributesCache = new Map(); // 缓存JSON解析结果\n\n//筛选后的数据\nconst filteredGoods = computed(() => {\n  let result = [...displayList.value];\n  // 搜索筛选\n  if (searchValue.value.trim()) {\n    const keyword = searchValue.value.trim().toLowerCase();\n    result = result.filter(item => {\n      const titleMatch = item.title.toLowerCase().includes(keyword);\n      const descMatch = item.desc.toLowerCase().includes(keyword);\n      return titleMatch || descMatch;\n    });\n  }\n\n  // 功能筛选\n  const selectedFunction = functionRange.value[functionIndex.value];\n  if (selectedFunction && selectedFunction !== '全部') {\n    const typeMap = { '宝贝': 'product', '需求': 'demand' };\n    result = result.filter(item => item.type === typeMap[selectedFunction]);\n  }\n\n  // 品类筛选\n  const selectedCategory = categoryOptions.value[categoryIndex.value];\n  if (selectedCategory && selectedCategory !== '全部') {\n    result = result.filter(item => {\n      const itemTags = Array.isArray(item.tags) ? item.tags : [];\n      return itemTags.includes(selectedCategory) || item.category === selectedCategory;\n    });\n  }\n\n  // 价格筛选\n  const selectedPrice = priceOptions.value[priceIndex.value];\n  if (selectedPrice && selectedPrice !== '全部') {\n    const range = priceRanges[selectedPrice];\n    result = result.filter(item => {\n      const itemPrice = Number(item.price) || 0;\n      return itemPrice >= range.min && itemPrice < range.max;\n    });\n  }\n\n  // 不再进行权重或价格排序，保留上游洗牌后的随机顺序\n  return result;\n});\n\n// 计算：是否为首屏加载（任意一个列表正在加载第1页）\nconst isInitialLoading = computed(() => {\n  return (goodsPageNum.value === 1 && isLoadingGoods.value) || (demandPageNum.value === 1 && isLoadingDemand.value);\n});\n\n// 计算：是否在加载更多（任意一个列表正在加载第2页及以上）\nconst isLoadingMore = computed(() => {\n  return (goodsPageNum.value > 1 && isLoadingGoods.value) || (demandPageNum.value > 1 && isLoadingDemand.value);\n});\n\n</script>\n\n<style scoped>\n.category-page {\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n.background-container {\n  min-height: 300rpx;\n  position: relative;\n  z-index: 1;\n  padding: 16rpx;\n  box-sizing: border-box;\n}\n\n.statusBar {\n  height: 150rpx;\n}\n\n/* 搜索和筛选整体容器 */\n.search-filter-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 10rpx;\n  padding: 0 16rpx;\n  box-sizing: border-box;\n  margin-bottom: 20rpx;\n}\n\n.search-section {\n  flex: 1;\n  min-width: 280rpx;\n}\n\n.search-box {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border-radius: 10rpx;\n  padding: 10rpx 20rpx;\n  border: 1rpx solid #eee;\n  box-sizing: border-box;\n}\n\n.search-input {\n  flex: 1;\n  margin-left: 10rpx;\n  font-size: 28rpx;\n}\n\n/* 筛选区域 */\n.filter-section {\n  padding-left: 20rpx;\n  display: flex;\n  align-items: center;\n  \n  gap: 15rpx;\n}\n\n.filter-item {\n  display: flex;\n  align-items: center;\n  background-color: #fff;\n  border: 1rpx solid #ddd;\n  border-radius: 20rpx;\n  padding: 10rpx 16rpx;\n  box-sizing: border-box;\n}\n\n.filter-label {\n  font-size: 26rpx;\n  color: #666;\n  margin-right: 8rpx;\n}\n\n.custom-picker {\n  display: flex;\n  align-items: center;\n  font-size: 26rpx;\n  color: #333;\n}\n\n.picker-icon {\n  margin-left: 8rpx;\n}\n\n/* 空状态提醒样式 */\n.empty-reminder {\n  text-align: center;\n  padding: 100rpx 20rpx;\n  color: #999;\n  font-size: 28rpx;\n  background-color: #fff;\n  margin: 20rpx 16rpx;\n  border-radius: 10rpx;\n}\n\n/* 滚动到底提醒样式 */\n.bottom-reminder {\n  text-align: center;\n  padding: 20rpx;\n  color: #666;\n  font-size: 26rpx;\n  background-color: #f0f0f0;\n  margin: 16rpx;\n  border-radius: 8rpx;\n  animation: fadeIn 0.5s;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n/* 滚动容器样式 */\n.scroll-container {\n  width: 100%;\n  overflow-y: auto;\n}\n\n/* 骨架屏样式 */\n.skeleton-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16rpx;\n  padding: 0 16rpx 16rpx 16rpx;\n}\n\n.loading-skeleton {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16rpx;\n  padding: 16rpx;\n}\n\n.skeleton-card {\n  background-color: #ffffff;\n  border-radius: 10rpx;\n  overflow: hidden;\n  box-shadow: 0 2rpx 6rpx rgba(0,0,0,0.04);\n}\n\n.skeleton-image,\n.skeleton-title,\n.skeleton-price,\n.skeleton-avatar,\n.skeleton-name {\n  background: linear-gradient(90deg, #eee 25%, #f5f5f5 37%, #eee 63%);\n  background-size: 400% 100%;\n  animation: skeleton-shimmer 1.4s ease infinite;\n}\n\n.skeleton-image {\n  width: 100%;\n}\n\n.skeleton-title {\n  height: 30rpx;\n  margin: 20rpx 20rpx 12rpx 20rpx;\n  border-radius: 8rpx;\n}\n\n.skeleton-price {\n  height: 26rpx;\n  margin: 0 20rpx 16rpx 20rpx;\n  width: 40%;\n  border-radius: 8rpx;\n}\n\n.skeleton-user {\n  display: flex;\n  align-items: center;\n  padding: 0 20rpx 20rpx 20rpx;\n  gap: 12rpx;\n}\n\n.skeleton-avatar {\n  width: 40rpx;\n  height: 40rpx;\n  border-radius: 50%;\n}\n\n.skeleton-name {\n  flex: 1;\n  height: 24rpx;\n  border-radius: 8rpx;\n}\n\n@keyframes skeleton-shimmer {\n  0% { background-position: 0% 0; }\n  100% { background-position: 100% 0; }\n}\n</style>","import MiniProgramPage from 'C:/Users/86133/Desktop/demo/Lezhuan/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onMounted","nextTick","watch","productApi","sanitizeImageUrl","computed"],"mappings":"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"}