{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script setup>\nimport { onLaunch } from '@dcloudio/uni-app';\n\nonLaunch(() => {\n  // 仅在微信小程序中生效\n  // #ifdef MP-WEIXIN\n  // 监听路由变化，为每个页面设置默认转发\n  wx.onAppRoute((res) => {\n    const pages = getCurrentPages(); // 获取当前页面栈\n    const currentPage = pages[pages.length - 1]; // 当前页面实例\n\n    // 确保右上角分享菜单可见（好友/朋友圈）\n    wx.showShareMenu({\n      withShareTicket: true,\n      menus: ['shareAppMessage', 'shareTimeline']\n    });\n\n    // 如果页面没有单独定义分享回调，则使用全局默认\n    if (!currentPage.onShareAppMessage) {\n      currentPage.onShareAppMessage = () => {\n        return {\n          title: '趣乐转',\n          path: '/pages/index/index', // 全局默认转发到首页\n          imageUrl: 'https://api.shaolezhuan.cn/lzphoto/logo.jpg',\n        };\n      };\n    }\n\n    // 全局默认朋友圈分享\n    if (!currentPage.onShareTimeline) {\n      currentPage.onShareTimeline = () => {\n        return {\n          title: '我的小程序',\n          query: '',\n        };\n      };\n    }\n  });\n  // #endif\n});\n</script>\n\n<script>\nexport default {\n  onShow() {\n    console.log('App Show')\n  },\n  onHide() {\n    console.log('App Hide')\n  }\n}\n</script>\n\n<style>\n\n</style>","import App from './App.vue'\nimport { createPinia } from 'pinia' // 状态管理\nimport request from './utils/request' // 自定义请求工具\n\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App\n})\napp.$mount()\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nimport { installNavigationRefreshInterceptors } from './utils/navigationRefresh.js'\nexport function createApp() {\n  const app = createSSRApp(App)\n  const pinia = createPinia()\n  app.use(pinia)\n  app.config.globalProperties.$request = request // 挂载全局请求方法\n  // 全局：安装导航拦截器，确保每次页面跳转都触发刷新\n  installNavigationRefreshInterceptors()\n  return {\n    app\n  }\n}\n// #endif"],"names":["uni","onLaunch","wx","createSSRApp","App","createPinia","request","installNavigationRefreshInterceptors"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,MAAA,cAAe;AAAA,EACb,SAAS;AACPA,kBAAAA,MAAA,MAAA,OAAA,iBAAY,UAAU;AAAA,EACvB;AAAA,EACD,SAAS;AACPA,kBAAAA,MAAA,MAAA,OAAA,iBAAY,UAAU;AAAA,EACvB;AACH;;;;AA/CAC,kBAAAA,SAAS,MAAM;AAIbC,yBAAG,WAAW,CAAC,QAAQ;AACrB,cAAM,QAAQ;AACd,cAAM,cAAc,MAAM,MAAM,SAAS,CAAC;AAG1CA,sBAAAA,KAAG,cAAc;AAAA,UACf,iBAAiB;AAAA,UACjB,OAAO,CAAC,mBAAmB,eAAe;AAAA,QAChD,CAAK;AAGD,YAAI,CAAC,YAAY,mBAAmB;AAClC,sBAAY,oBAAoB,MAAM;AACpC,mBAAO;AAAA,cACL,OAAO;AAAA,cACP,MAAM;AAAA;AAAA,cACN,UAAU;AAAA,YACpB;AAAA,UACA;AAAA,QACK;AAGD,YAAI,CAAC,YAAY,iBAAiB;AAChC,sBAAY,kBAAkB,MAAM;AAClC,mBAAO;AAAA,cACL,OAAO;AAAA,cACP,OAAO;AAAA,YACjB;AAAA,UACA;AAAA,QACK;AAAA,MACL,CAAG;AAAA,IAEH,CAAC;;;;;ACrBM,SAAS,YAAY;AAC1B,QAAM,MAAMC,cAAY,aAACC,SAAG;AAC5B,QAAM,QAAQC,cAAAA,YAAa;AAC3B,MAAI,IAAI,KAAK;AACb,MAAI,OAAO,iBAAiB,WAAWC,cAAO;AAE9CC,+DAAsC;AACtC,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}