"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const a={__name:"setting",setup(a){const t=e.ref(["男","女"]),r=e.ref(0),u=e.ref(["韶乐园校区","黄田坝校区","十里亭校区"]),n=e.ref(0),l=e.ref(["芙蓉苑","秋枫苑","丁香苑","海棠苑","蔷薇苑","紫荆苑","红棉苑","丹竹苑","丹桂苑","碧桃苑","紫藤苑","樱花苑","梧桐苑","黄田坝6栋","黄田坝9栋","黄田坝10栋","黄田坝12栋"]),o=e.ref(0),v=e.ref({avatarUrl:"",nickName:"",studentIdNumber:"",campus:"",dormitory:"",major:""});e.onMounted(()=>{const a=e.index.getStorageSync("studentIdNumber"),c=e.index.getStorageSync("nickname"),s=e.index.getStorageSync("avatarUrl"),i=e.index.getStorageSync("userInfo");if(v.value={studentIdNumber:a||i.studentIdNumber||"",nickName:c||i.nickName||"",avatarUrl:s||i.avatarUrl||"",gender:i.gender||"",campus:i.campus||"",dormitory:i.dormitory||"",major:i.major||""},v.value.gender){const e=t.value.indexOf(v.value.gender);-1!==e&&(r.value=e)}if(v.value.campus){const e=u.value.indexOf(v.value.campus);-1!==e&&(n.value=e)}if(v.value.dormitory){const e=l.value.indexOf(v.value.dormitory);-1!==e&&(o.value=e)}});const c=e=>{r.value=e.detail.value,v.value.gender=t.value[r.value]},s=e=>{n.value=e.detail.value,v.value.campus=u.value[n.value]},i=e=>{o.value=e.detail.value,v.value.dormitory=l.value[o.value]},d=()=>{e.index.setStorageSync("userInfo",v.value),v.value.studentIdNumber&&e.index.setStorageSync("studentIdNumber",v.value.studentIdNumber),v.value.nickName&&e.index.setStorageSync("nickname",v.value.nickName),v.value.avatarUrl&&e.index.setStorageSync("avatarUrl",v.value.avatarUrl),e.index.showToast({title:"信息保存成功",icon:"success"})},m=()=>{e.index.showModal({title:"退出登录",content:"确定要退出登录吗？",success:a=>{a.confirm&&(e.index.clearStorageSync(),e.index.reLaunch({url:"/pages/setting/setting"}))}})};return(a,g)=>({a:v.value.avatarUrl||"https://api.shaolezhuan.cn/lzphoto/avatars/avatar1.jpeg",b:e.o((...e)=>a.chooseAvatar&&a.chooseAvatar(...e)),c:e.t(v.value.nickName||"未设置昵称"),d:e.t(v.value.studentIdNumber||"请完成学生认证"),e:e.t(t.value[r.value]||"请选择"),f:t.value,g:r.value,h:e.o(c),i:e.p({type:"right",size:"24",color:"#ccc"}),j:e.t(u.value[n.value]||"请选择"),k:u.value,l:n.value,m:e.o(s),n:e.p({type:"right",size:"24",color:"#ccc"}),o:e.t(l.value[o.value]||"请选择"),p:l.value,q:o.value,r:e.o(i),s:e.p({type:"right",size:"24",color:"#ccc"}),t:v.value.major,v:e.o(e=>v.value.major=e.detail.value),w:e.o(d),x:e.o(m)})}},t=e._export_sfc(a,[["__scopeId","data-v-74ad8982"]]);wx.createPage(t);
