"use strict";const e=require("../common/vendor.js");if(!Array){e.resolveComponent("uni-tag")()}Math;const t={__name:"Waterfall",props:{list:{type:Array,default:()=>[]},columnCount:{type:Number,default:2},gap:{type:Number,default:20},borderRadius:{type:Number,default:10},contentPadding:{type:Number,default:16},titleSize:{type:Number,default:28},descSize:{type:Number,default:24},descMarginTop:{type:Number,default:8},descLineCount:{type:Number,default:2},priceMarginTop:{type:Number,default:8},userInfoMarginTop:{type:Number,default:12},avatarSize:{type:Number,default:40},nicknameSize:{type:Number,default:24},nicknameMarginLeft:{type:Number,default:8}},setup(t){const r=t,n=e.computed(()=>`calc((100% - ${(r.columnCount-1)*r.gap}rpx) / ${r.columnCount})`),i=e.computed(()=>{if(0===r.list.length)return[];const e=r.list.filter(e=>e.isAdminPinned),t=r.list.filter(e=>!e.isAdminPinned),n=[...[...e].sort((e,t)=>t.adminPinScore-e.adminPinScore),...[...t].sort((e,t)=>t.adminPinScore-e.adminPinScore)],i=Array.from({length:r.columnCount},()=>[]),a=new Array(r.columnCount).fill(0);return n.forEach(e=>{const t=Math.min(...a),r=a.indexOf(t);i[r].push(e);const n=400+e.desc.split(" ").length/10*20;a[r]+=n}),i});return(r,a)=>({a:e.f(i.value,(t,r,n)=>({a:e.f(t,(t,r,i)=>e.e({a:t.isAdminPinned},t.isAdminPinned?{b:"635050c2-0-"+n+"-"+i,c:e.p({text:"置顶",type:"error",size:"mini"})}:{},{d:t.imgUrl,e:t.title,f:t.tags&&t.tags.length>0},t.tags&&t.tags.length>0?{g:e.f(t.tags,(t,r,a)=>{return{a:"635050c2-1-"+n+"-"+i+"-"+a,b:e.p({size:"mini",text:t,type:(d=t,"需求"===d?"warning":"可刀"===d||"不可刀"===d?"error":"primary")}),c:r};var d})}:{},{h:e.t(t.title),i:e.t(t.desc),j:e.t(t.price.toFixed(2)),k:t.user.avatar,l:e.t(t.user.nickname),m:t.id,n:t.isAdminPinned?"4rpx solid #ff4d4f":"none",o:e.o(r=>((t,r)=>{const n=r||"product";e.index.navigateTo({url:`/pages/ProductDetail/ProductDetail?id=${t}&type=${n}`})})(t.id,t.type),t.id)})),b:r})),b:`${t.borderRadius}rpx ${t.borderRadius}rpx 0 0`,c:`${t.descSize}rpx`,d:`${t.descMarginTop}rpx`,e:t.descLineCount,f:`${t.priceMarginTop}rpx`,g:`${t.avatarSize}rpx`,h:`${t.avatarSize}rpx`,i:t.avatarSize/2+"rpx",j:`${t.nicknameSize}rpx`,k:`${t.nicknameMarginLeft}rpx`,l:`${t.userInfoMarginTop}rpx`,m:`${t.contentPadding}rpx`,n:t.gap+"rpx",o:n.value})}},r=e._export_sfc(t,[["__scopeId","data-v-635050c2"]]);wx.createComponent(r);
