"use strict";const e=require("../common/vendor.js");exports.request=function(t){const o=e.index.getStorageSync("token");return o&&(t.header={...t.header,Authorization:`Bearer ${o}`}),new Promise((n,a)=>{e.index.request({url:"https://api.shaolezhuan.cn"+t.url,method:t.method||"GET",data:t.data,header:t.header||{},success:t=>{401===t.data.code?o?a("登录已过期，请重新登录"):e.index.showToast({title:"请先完成用户登录",icon:"none"}):n(t.data)},fail:t=>{e.index.showToast({title:"网络错误",icon:"none"}),a(t)}})})};
